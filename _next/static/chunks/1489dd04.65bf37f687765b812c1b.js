"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{32938:function(e,t,n){n.d(t,{tQ2:function(){return r.tQ},IZ1:function(){return ka},m6F:function(){return ic},P8q:function(){return Ra},JWj:function(){return uc},VZw:function(){return Ks},oPu:function(){return Ki},OKZ:function(){return nc},gbK:function(){return sc},dXZ:function(){return Qi},kp$:function(){return oa},QNK:function(){return Ac},lq5:function(){return Ba},Xh5:function(){return pc},W8w:function(){return $c},MLK:function(){return ca},xPp:function(){return pa},yG:function(){return ks},gCm:function(){return ua},MEl:function(){return Dc},T_4:function(){return yc},xwM:function(){return Nc},nP$:function(){return ws},Tj2:function(){return ha},TbA:function(){return Sc},pLM:function(){return Bo},GDC:function(){return Xi},oGK:function(){return Ji},o3Y:function(){return ea},jB_:function(){return ta},$H6:function(){return na},KWL:function(){return ra},IVr:function(){return $a},JBe:function(){return la},Kh1:function(){return Qs},_s6:function(){return Ya},SrD:function(){return hc},Hio:function(){return Va},BX9:function(){return is},Qpp:function(){return tc},QMB:function(){return ac},mZ5:function(){return dc},Vjd:function(){return mc},ShV:function(){return Rc},wFU:function(){return Is},QUr:function(){return Os},NXD:function(){return Xs},r4m:function(){return ec},c8Y:function(){return jc},duD:function(){return wc},uVm:function(){return Mc},lF2:function(){return zs},vTz:function(){return ga},hAV:function(){return Ri},mh5:function(){return Pc},MRQ:function(){return Cc},DYv:function(){return Tn},xmC:function(){return Pn},nJ_:function(){return Ti},Hms:function(){return za},eq2:function(){return ia},oqu:function(){return ro},v$F:function(){return Cn},Qq3:function(){return Ao},NU1:function(){return Co},lBo:function(){return Io},n2N:function(){return Ur},ZFY:function(){return qo},_eL:function(){return Ko},sBR:function(){return Uo},rLb:function(){return Da},ptC:function(){return Zr},zbr:function(){return Hr},hem:function(){return Gr},ulk:function(){return Qr},hUb:function(){return Fa},yw6:function(){return Jr},_YE:function(){return no},EPs:function(){return to},CBv:function(){return Go},W1F:function(){return ii},zGw:function(){return Xo},cax:function(){return Sa},D89:function(){return Ta},j_b:function(){return Po},kQP:function(){return Qa},See:function(){return Ga},LKm:function(){return ui},rn_:function(){return Zs},ZZw:function(){return Yi},kTu:function(){return N},rmA:function(){return Ha},CUm:function(){return vs},PzK:function(){return Bc},_6z:function(){return ai},Uje:function(){return Ps},qEX:function(){return di}});var r=n(40935),o=n(87410),i=n(77489),a=n(67294),s=n(73935),c=n(47159),l=n(65066),u=n(32293),d=n(78872),p=n(57969),f=n(87275),v=n(15660),h=n(27006),m=n(46408),y=n(91474),g=n(59240),b=(n(97762),n(71815)),j=(n(12861),n(5065),n(18835),n(11591)),k=Array.isArray;var x=function(){if(!arguments.length)return[];var e=arguments[0];return k(e)?e:[e]};const N=({plugins:e=[],inlineTypes:t=[],voidTypes:n=[]})=>r=>{const{isInline:o}=r,{isVoid:i}=r;let a=[...t],s=[...n];return e.forEach((e=>{e.inlineTypes&&(a=a.concat(x(e.inlineTypes))),e.voidTypes&&(s=s.concat(x(e.voidTypes)))})),r.isInline=e=>!!a.includes(e.type)||o(e),r.isVoid=e=>!!s.includes(e.type)||i(e),r};var O=function(){this.__data__=[],this.size=0};var _=function(e,t){return e===t||e!==e&&t!==t};var w=function(e,t){for(var n=e.length;n--;)if(_(e[n][0],t))return n;return-1},L=Array.prototype.splice;var E=function(e){var t=this.__data__,n=w(t,e);return!(n<0)&&(n==t.length-1?t.pop():L.call(t,n,1),--this.size,!0)};var M=function(e){var t=this.__data__,n=w(t,e);return n<0?void 0:t[n][1]};var R=function(e){return w(this.__data__,e)>-1};var S=function(e,t){var n=this.__data__,r=w(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function T(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}T.prototype.clear=O,T.prototype.delete=E,T.prototype.get=M,T.prototype.has=R,T.prototype.set=S;var z=T;var P=function(){this.__data__=new z,this.size=0};var A=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var $=function(e){return this.__data__.get(e)};var B=function(e){return this.__data__.has(e)},D="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function C(e,t){return e(t={exports:{}},t.exports),t.exports}var I="object"==typeof D&&D&&D.Object===Object&&D,Y="object"==typeof self&&self&&self.Object===Object&&self,F=I||Y||Function("return this")(),W=F.Symbol,q=Object.prototype,K=q.hasOwnProperty,U=q.toString,V=W?W.toStringTag:void 0;var Z=function(e){var t=K.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(i){}var o=U.call(e);return r&&(t?e[V]=n:delete e[V]),o},H=Object.prototype.toString;var G=function(e){return H.call(e)},Q=W?W.toStringTag:void 0;var X=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Q&&Q in Object(e)?Z(e):G(e)};var J=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var ee=function(e){if(!J(e))return!1;var t=X(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},te=F["__core-js_shared__"],ne=function(){var e=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var re=function(e){return!!ne&&ne in e},oe=Function.prototype.toString;var ie=function(e){if(null!=e){try{return oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""},ae=/^\[object .+?Constructor\]$/,se=Function.prototype,ce=Object.prototype,le=se.toString,ue=ce.hasOwnProperty,de=RegExp("^"+le.call(ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var pe=function(e){return!(!J(e)||re(e))&&(ee(e)?de:ae).test(ie(e))};var fe=function(e,t){return null==e?void 0:e[t]};var ve=function(e,t){var n=fe(e,t);return pe(n)?n:void 0},he=ve(F,"Map"),me=ve(Object,"create");var ye=function(){this.__data__=me?me(null):{},this.size=0};var ge=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},be=Object.prototype.hasOwnProperty;var je=function(e){var t=this.__data__;if(me){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return be.call(t,e)?t[e]:void 0},ke=Object.prototype.hasOwnProperty;var xe=function(e){var t=this.__data__;return me?void 0!==t[e]:ke.call(t,e)};var Ne=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=me&&void 0===t?"__lodash_hash_undefined__":t,this};function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Oe.prototype.clear=ye,Oe.prototype.delete=ge,Oe.prototype.get=je,Oe.prototype.has=xe,Oe.prototype.set=Ne;var _e=Oe;var we=function(){this.size=0,this.__data__={hash:new _e,map:new(he||z),string:new _e}};var Le=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Ee=function(e,t){var n=e.__data__;return Le(t)?n["string"==typeof t?"string":"hash"]:n.map};var Me=function(e){var t=Ee(this,e).delete(e);return this.size-=t?1:0,t};var Re=function(e){return Ee(this,e).get(e)};var Se=function(e){return Ee(this,e).has(e)};var Te=function(e,t){var n=Ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ze(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ze.prototype.clear=we,ze.prototype.delete=Me,ze.prototype.get=Re,ze.prototype.has=Se,ze.prototype.set=Te;var Pe=ze;var Ae=function(e,t){var n=this.__data__;if(n instanceof z){var r=n.__data__;if(!he||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pe(r)}return n.set(e,t),this.size=n.size,this};function $e(e){var t=this.__data__=new z(e);this.size=t.size}$e.prototype.clear=P,$e.prototype.delete=A,$e.prototype.get=$,$e.prototype.has=B,$e.prototype.set=Ae;var Be=$e;var De=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Ce=function(){try{var e=ve(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var Ie=function(e,t,n){"__proto__"==t&&Ce?Ce(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ye=Object.prototype.hasOwnProperty;var Fe=function(e,t,n){var r=e[t];Ye.call(e,t)&&_(r,n)&&(void 0!==n||t in e)||Ie(e,t,n)};var We=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),o?Ie(n,s,c):Fe(n,s,c)}return n};var qe=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Ke=function(e){return null!=e&&"object"==typeof e};var Ue=function(e){return Ke(e)&&"[object Arguments]"==X(e)},Ve=Object.prototype,Ze=Ve.hasOwnProperty,He=Ve.propertyIsEnumerable,Ge=Ue(function(){return arguments}())?Ue:function(e){return Ke(e)&&Ze.call(e,"callee")&&!He.call(e,"callee")};var Qe=function(){return!1},Xe=C((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?F.Buffer:void 0,i=(o?o.isBuffer:void 0)||Qe;e.exports=i})),Je=/^(?:0|[1-9]\d*)$/;var et=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Je.test(e))&&e>-1&&e%1==0&&e<t};var tt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},nt={};nt["[object Float32Array]"]=nt["[object Float64Array]"]=nt["[object Int8Array]"]=nt["[object Int16Array]"]=nt["[object Int32Array]"]=nt["[object Uint8Array]"]=nt["[object Uint8ClampedArray]"]=nt["[object Uint16Array]"]=nt["[object Uint32Array]"]=!0,nt["[object Arguments]"]=nt["[object Array]"]=nt["[object ArrayBuffer]"]=nt["[object Boolean]"]=nt["[object DataView]"]=nt["[object Date]"]=nt["[object Error]"]=nt["[object Function]"]=nt["[object Map]"]=nt["[object Number]"]=nt["[object Object]"]=nt["[object RegExp]"]=nt["[object Set]"]=nt["[object String]"]=nt["[object WeakMap]"]=!1;var rt=function(e){return Ke(e)&&tt(e.length)&&!!nt[X(e)]};var ot=function(e){return function(t){return e(t)}},it=C((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n&&I.process,i=function(){try{var e=r&&r.require&&r.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=i})),at=it&&it.isTypedArray,st=at?ot(at):rt,ct=Object.prototype.hasOwnProperty;var lt=function(e,t){var n=k(e),r=!n&&Ge(e),o=!n&&!r&&Xe(e),i=!n&&!r&&!o&&st(e),a=n||r||o||i,s=a?qe(e.length,String):[],c=s.length;for(var l in e)!t&&!ct.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||et(l,c))||s.push(l);return s},ut=Object.prototype;var dt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ut)};var pt=function(e,t){return function(n){return e(t(n))}},ft=pt(Object.keys,Object),vt=Object.prototype.hasOwnProperty;var ht=function(e){if(!dt(e))return ft(e);var t=[];for(var n in Object(e))vt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var mt=function(e){return null!=e&&tt(e.length)&&!ee(e)};var yt=function(e){return mt(e)?lt(e):ht(e)};var gt=function(e,t){return e&&We(t,yt(t),e)};var bt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},jt=Object.prototype.hasOwnProperty;var kt=function(e){if(!J(e))return bt(e);var t=dt(e),n=[];for(var r in e)("constructor"!=r||!t&&jt.call(e,r))&&n.push(r);return n};var xt=function(e){return mt(e)?lt(e,!0):kt(e)};var Nt=function(e,t){return e&&We(t,xt(t),e)},Ot=C((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,o=r&&r.exports===n?F.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}));var _t=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var wt=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var Lt=function(){return[]},Et=Object.prototype.propertyIsEnumerable,Mt=Object.getOwnPropertySymbols,Rt=Mt?function(e){return null==e?[]:(e=Object(e),wt(Mt(e),(function(t){return Et.call(e,t)})))}:Lt;var St=function(e,t){return We(e,Rt(e),t)};var Tt=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},zt=pt(Object.getPrototypeOf,Object),Pt=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Tt(t,Rt(e)),e=zt(e);return t}:Lt;var At=function(e,t){return We(e,Pt(e),t)};var $t=function(e,t,n){var r=t(e);return k(e)?r:Tt(r,n(e))};var Bt=function(e){return $t(e,yt,Rt)};var Dt=function(e){return $t(e,xt,Pt)},Ct=ve(F,"DataView"),It=ve(F,"Promise"),Yt=ve(F,"Set"),Ft=ve(F,"WeakMap"),Wt="[object Map]",qt="[object Promise]",Kt="[object Set]",Ut="[object WeakMap]",Vt="[object DataView]",Zt=ie(Ct),Ht=ie(he),Gt=ie(It),Qt=ie(Yt),Xt=ie(Ft),Jt=X;(Ct&&Jt(new Ct(new ArrayBuffer(1)))!=Vt||he&&Jt(new he)!=Wt||It&&Jt(It.resolve())!=qt||Yt&&Jt(new Yt)!=Kt||Ft&&Jt(new Ft)!=Ut)&&(Jt=function(e){var t=X(e),n="[object Object]"==t?e.constructor:void 0,r=n?ie(n):"";if(r)switch(r){case Zt:return Vt;case Ht:return Wt;case Gt:return qt;case Qt:return Kt;case Xt:return Ut}return t});var en=Jt,tn=Object.prototype.hasOwnProperty;var nn=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tn.call(e,"index")&&(n.index=e.index,n.input=e.input),n},rn=F.Uint8Array;var on=function(e){var t=new e.constructor(e.byteLength);return new rn(t).set(new rn(e)),t};var an=function(e,t){var n=t?on(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},sn=/\w*$/;var cn=function(e){var t=new e.constructor(e.source,sn.exec(e));return t.lastIndex=e.lastIndex,t},ln=W?W.prototype:void 0,un=ln?ln.valueOf:void 0;var dn=function(e){return un?Object(un.call(e)):{}};var pn=function(e,t){var n=t?on(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var fn=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return on(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return an(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pn(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return cn(e);case"[object Set]":return new r;case"[object Symbol]":return dn(e)}},vn=Object.create,hn=function(){function e(){}return function(t){if(!J(t))return{};if(vn)return vn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var mn=function(e){return"function"!=typeof e.constructor||dt(e)?{}:hn(zt(e))};var yn=function(e){return Ke(e)&&"[object Map]"==en(e)},gn=it&&it.isMap,bn=gn?ot(gn):yn;var jn=function(e){return Ke(e)&&"[object Set]"==en(e)},kn=it&&it.isSet,xn=kn?ot(kn):jn,Nn="[object Arguments]",On="[object Function]",_n="[object Object]",wn={};wn[Nn]=wn["[object Array]"]=wn["[object ArrayBuffer]"]=wn["[object DataView]"]=wn["[object Boolean]"]=wn["[object Date]"]=wn["[object Float32Array]"]=wn["[object Float64Array]"]=wn["[object Int8Array]"]=wn["[object Int16Array]"]=wn["[object Int32Array]"]=wn["[object Map]"]=wn["[object Number]"]=wn[_n]=wn["[object RegExp]"]=wn["[object Set]"]=wn["[object String]"]=wn["[object Symbol]"]=wn["[object Uint8Array]"]=wn["[object Uint8ClampedArray]"]=wn["[object Uint16Array]"]=wn["[object Uint32Array]"]=!0,wn["[object Error]"]=wn[On]=wn["[object WeakMap]"]=!1;var Ln=function e(t,n,r,o,i,a){var s,c=1&n,l=2&n,u=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),void 0!==s)return s;if(!J(t))return t;var d=k(t);if(d){if(s=nn(t),!c)return _t(t,s)}else{var p=en(t),f=p==On||"[object GeneratorFunction]"==p;if(Xe(t))return Ot(t,c);if(p==_n||p==Nn||f&&!i){if(s=l||f?{}:mn(t),!c)return l?At(t,Nt(s,t)):St(t,gt(s,t))}else{if(!wn[p])return i?t:{};s=fn(t,p,c)}}a||(a=new Be);var v=a.get(t);if(v)return v;a.set(t,s),xn(t)?t.forEach((function(o){s.add(e(o,n,r,o,t,a))})):bn(t)&&t.forEach((function(o,i){s.set(i,e(o,n,r,i,t,a))}));var h=u?l?Dt:Bt:l?keysIn:yt,m=d?void 0:h(t);return De(m||t,(function(o,i){m&&(o=t[i=o]),Fe(s,i,e(o,n,r,i,t,a))})),s};var En=function(e){return Ln(e,5)};const Mn=(e,t)=>!t||("object"===typeof t?Object.entries(t).every((([t,n])=>x(n).includes(e[t]))):t(e)),Rn=(e,t)=>Object.assign(Object.assign({},t),{match:n=>Mn(n,t.match)&&(!(null===t||void 0===t?void 0:t.block)||o.ML.isBlock(e,n))}),Sn=(e,t)=>{try{const{match:n,at:r=e.selection,reverse:i=!1,voids:a=!1}=t;if(!r)return;let s,c;if(o.Dr.isSpan(r))[s,c]=r;else if(o.e6.isRange(r)){const t=o.ML.path(e,r,{edge:"start"}),n=o.ML.path(e,r,{edge:"end"});s=i?n:t,c=i?t:n}let l=[e,[]];o.y$.isPath(r)&&(l=o.ML.node(e,r));const u=o.NB.descendants(l[0],{reverse:i,from:s,to:c,pass:([t])=>!a&&o.ML.isVoid(e,t)});for(const[e,t]of u)if(Mn(e,n))return[e,r.concat(t)]}catch(n){return}},Tn=(e,t)=>{try{const{match:n=(()=>!0),at:r=e.selection||[],reverse:i=!1,voids:a=!1}=t;let s,c;if(o.Dr.isSpan(r))[s,c]=r;else if(o.e6.isRange(r)){const t=o.ML.path(e,r,{edge:"start"}),n=o.ML.path(e,r,{edge:"end"});s=i?n:t,c=i?t:n}let l=[e,[]];o.y$.isPath(r)&&(l=o.ML.node(e,r));const u=o.NB.nodes(l[0],{reverse:i,from:s,to:c,pass:([t])=>!a&&o.ML.isVoid(e,t)});for(const[e,t]of u)if(Mn(e,n))return[e,t]}catch(n){return}},zn=(e,t={})=>o.ML.above(e,Rn(e,t)),Pn=(e,t={})=>zn(e,Object.assign(Object.assign({},t),{block:!0})),An=e=>(e=>{const[t,n]=e;return[t.children[t.children.length-1],n.concat([t.children.length-1])]})(e)[1],$n=e=>o.W_.isElement(e)||o.ML.isEditor(e),Bn=(e,t)=>{try{return o.NB.get(e,t)}catch(n){return null}},Dn=(e,t={})=>{const{at:n=e.selection,voids:r,unhang:i=!0}=t;o.e6.isRange(n)&&i&&(t.at=o.ML.unhangRange(e,n,{voids:r}))},Cn=(e,t={})=>(Dn(e,t),o.ML.nodes(e,Rn(e,t))),In=(e,t,n)=>{try{return o.ML.parent(e,t,n)}catch(r){}};var Yn=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var Fn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Wn=function(e){return this.__data__.has(e)};function qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pe;++t<n;)this.add(e[t])}qn.prototype.add=qn.prototype.push=Fn,qn.prototype.has=Wn;var Kn=qn;var Un=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var Vn=function(e,t){return e.has(t)};var Zn=function(e,t,n,r,o,i){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var u=-1,d=!0,p=2&n?new Kn:void 0;for(i.set(e,t),i.set(t,e);++u<s;){var f=e[u],v=t[u];if(r)var h=a?r(v,f,u,t,e,i):r(f,v,u,e,t,i);if(void 0!==h){if(h)continue;d=!1;break}if(p){if(!Un(t,(function(e,t){if(!Vn(p,t)&&(f===e||o(f,e,n,r,i)))return p.push(t)}))){d=!1;break}}else if(f!==v&&!o(f,v,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d};var Hn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Gn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Qn=W?W.prototype:void 0,Xn=Qn?Qn.valueOf:void 0;var Jn=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new rn(e),new rn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Hn;case"[object Set]":var c=1&r;if(s||(s=Gn),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var u=Zn(s(e),s(t),r,o,i,a);return a.delete(e),u;case"[object Symbol]":if(Xn)return Xn.call(e)==Xn.call(t)}return!1},er=Object.prototype.hasOwnProperty;var tr=function(e,t,n,r,o,i){var a=1&n,s=Bt(e),c=s.length;if(c!=Bt(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:er.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++l<c;){var v=e[u=s[l]],h=t[u];if(r)var m=a?r(h,v,u,t,e,i):r(v,h,u,e,t,i);if(!(void 0===m?v===h||o(v,h,n,r,i):m)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,g=t.constructor;y==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(e),i.delete(t),p},nr="[object Arguments]",rr="[object Array]",or="[object Object]",ir=Object.prototype.hasOwnProperty;var ar=function(e,t,n,r,o,i){var a=k(e),s=k(t),c=a?rr:en(e),l=s?rr:en(t),u=(c=c==nr?or:c)==or,d=(l=l==nr?or:l)==or,p=c==l;if(p&&Xe(e)){if(!Xe(t))return!1;a=!0,u=!1}if(p&&!u)return i||(i=new Be),a||st(e)?Zn(e,t,n,r,o,i):Jn(e,t,c,n,r,o,i);if(!(1&n)){var f=u&&ir.call(e,"__wrapped__"),v=d&&ir.call(t,"__wrapped__");if(f||v){var h=f?e.value():e,m=v?t.value():t;return i||(i=new Be),o(h,m,n,r,i)}}return!!p&&(i||(i=new Be),tr(e,t,n,r,o,i))};var sr=function e(t,n,r,o,i){return t===n||(null==t||null==n||!Ke(t)&&!Ke(n)?t!==t&&n!==n:ar(t,n,r,o,e,i))};var cr=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=n[o])[0],l=e[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in e))return!1}else{var d=new Be;if(r)var p=r(l,u,c,e,t,d);if(!(void 0===p?sr(u,l,3,r,d):p))return!1}}return!0};var lr=function(e){return e===e&&!J(e)};var ur=function(e){for(var t=yt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,lr(o)]}return t};var dr=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var pr=function(e){var t=ur(e);return 1==t.length&&t[0][2]?dr(t[0][0],t[0][1]):function(n){return n===e||cr(n,e,t)}};var fr=function(e){return"symbol"==typeof e||Ke(e)&&"[object Symbol]"==X(e)},vr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hr=/^\w*$/;var mr=function(e,t){if(k(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!fr(e))||(hr.test(e)||!vr.test(e)||null!=t&&e in Object(t))};function yr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(yr.Cache||Pe),n}yr.Cache=Pe;var gr=yr;var br=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jr=/\\(\\)?/g,kr=function(e){var t=gr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(br,(function(e,n,r,o){t.push(r?o.replace(jr,"$1"):n||e)})),t})),xr=W?W.prototype:void 0,Nr=xr?xr.toString:void 0;var Or=function e(t){if("string"==typeof t)return t;if(k(t))return Yn(t,e)+"";if(fr(t))return Nr?Nr.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var _r=function(e){return null==e?"":Or(e)};var wr=function(e,t){return k(e)?e:mr(e,t)?[e]:kr(_r(e))};var Lr=function(e){if("string"==typeof e||fr(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Er=function(e,t){for(var n=0,r=(t=wr(t,e)).length;null!=e&&n<r;)e=e[Lr(t[n++])];return n&&n==r?e:void 0};var Mr=function(e,t,n){var r=null==e?void 0:Er(e,t);return void 0===r?n:r};var Rr=function(e,t){return null!=e&&t in Object(e)};var Sr=function(e,t,n){for(var r=-1,o=(t=wr(t,e)).length,i=!1;++r<o;){var a=Lr(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&tt(o)&&et(a,o)&&(k(e)||Ge(e))};var Tr=function(e,t){return null!=e&&Sr(e,t,Rr)};var zr=function(e,t){return mr(e)&&lr(t)?dr(Lr(e),t):function(n){var r=Mr(n,e);return void 0===r&&r===t?Tr(n,e):sr(t,r,3)}};var Pr=function(e){return e};var Ar=function(e){return function(t){return null==t?void 0:t[e]}};var $r=function(e){return function(t){return Er(t,e)}};var Br=function(e){return mr(e)?Ar(Lr(e)):$r(e)};var Dr=function(e){return"function"==typeof e?e:null==e?Pr:"object"==typeof e?k(e)?zr(e[0],e[1]):pr(e):Br(e)};var Cr=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}();var Ir=function(e,t){return function(n,r){if(null==n)return n;if(!mt(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(e,t){return e&&Cr(e,t,yt)}));var Yr=function(e,t){var n=-1,r=mt(e)?Array(e.length):[];return Ir(e,(function(e,o,i){r[++n]=t(e,o,i)})),r};var Fr=function(e,t){return(k(e)?Yn:Yr)(e,Dr(t))};const Wr=(e,t,n)=>{var r,i,a;if(!n||!n.match&&!n.matchString)return o.ML.before(e,t,n);let s=t,c=o.ML.point(e,t,{edge:"end"});const l=((null===(r=n.matchString)||void 0===r?void 0:r.length)||0)+1,u=Array(l),d=!n.unit||"offset"===n.unit;let p=0;for(;;){const r=o.ML.before(e,s,n);if(!r)return;if(!n.multiPaths&&!o.y$.equals(r.path,c.path))return;const f=o.ML.string(e,{anchor:r,focus:c}),v=x(n.matchString);let h=f;if(d&&l&&(u.unshift({point:r,text:f}),u.pop(),h=Fr(u.slice(0,-1),"text").join("")),v.includes(h)||(null===(i=n.match)||void 0===i?void 0:i.call(n,{beforeString:h,beforePoint:r,at:t})))return n.afterMatch?l&&d?null===(a=u[u.length-1])||void 0===a?void 0:a.point:c:r;if(c=r,s=r,p+=1,!n.skipInvalid&&(!v||p>v.length))return}},qr=(e,{filter:t=(()=>!0),allow:n=[],exclude:r=[]}={})=>{const o=x(n),i=x(r);let a=()=>!0;o.length&&(a=([e])=>o.includes(e.type));let s=()=>!0;return i.length&&(s=([e])=>!i.includes(e.type)),!!e&&t(e)&&a(e)&&s(e)},Kr=(e,t,n)=>{const r=Wr(e,t,n);if(!r)return;return{anchor:r,focus:o.ML.point(e,t,{edge:"end"})}},Ur=(e,t={})=>{var n;const r=null===(n=Pn(e,t))||void 0===n?void 0:n[1];if(!r)return;const i=o.ML.start(e,r),a=((e,{at:t=e.selection,focus:n}={})=>{let r;return o.e6.isRange(t)&&(r=n?t.focus:t.anchor),o.E9.isPoint(t)&&(r=t),o.y$.isPath(t)&&(r={path:t,offset:0}),r})(e,t);return a?{anchor:i,focus:a}:void 0},Vr=(e,t)=>{var n;return null!==(n=t&&o.ML.string(e,t))&&void 0!==n?n:""},Zr=e=>{var t;const n=null===(t=Pn(e))||void 0===t?void 0:t[0];return!!n&&((e,t)=>!o.NB.string(t)&&!t.children.some((t=>o.ML.isInline(e,t))))(e,n)},Hr=e=>!!e&&o.e6.isCollapsed(e),Gr=(e,t,n)=>!!t&&o.ML.isEnd(e,t,n),Qr=e=>!!e&&o.e6.isExpanded(e),Xr=e=>0===e[e.length-1],Jr=(e,t)=>{const n=o.ML.marks(e);return!!n&&!0===n[t]};function eo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}const to=(e,t,n)=>!!t&&o.ML.isStart(e,t,n),no=e=>{var t,n;const r=null===(t=Pn(e))||void 0===t?void 0:t[1];return!!r&&to(e,null===(n=e.selection)||void 0===n?void 0:n.focus,r)},ro=({type:e,node:t,attributes:n,rules:r,withoutChildren:o})=>{const i=[];return r.forEach((({nodeNames:r="*",style:a,className:s,attribute:c})=>{(r=x(r)).forEach((l=>{i.push({type:e,withoutChildren:o,deserialize:e=>{if(r.length&&!r.includes(e.nodeName)&&"*"!==l)return;if(s&&!e.classList.contains(s))return;if(a)for(const[t,n]of Object.entries(a)){if(!x(n).includes(e.style[t]))return}if(c)if("string"===typeof c){if(!e.getAttributeNames().includes(c))return}else for(const[t,n]of Object.entries(c)){const r=x(n),o=e.getAttribute(t);if(!o||!r.includes(o))return}const o={};if(n){const t=e.getAttributeNames();for(const r of n)t.includes(r)&&(o[r]=e.getAttribute(r))}const i=t(e);return i&&Object.keys(o).length&&(i.attributes=o),i}})}))})),i},oo=e=>ro(Object.assign({node:()=>({type:e.type})},e)),io=(e,...t)=>()=>{null===e||void 0===e||e(...t)},ao=e=>ro(Object.assign({node:()=>({[e.type]:!0})},e)),so=(e,t,n=[])=>{if(Jr(e,t))return void e.removeMark(t);x(n).forEach((t=>{e.removeMark(t)})),e.addMark(t,!0)};var co=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},lo=Math.max;var uo=function(e,t,n){return t=lo(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=lo(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),co(e,this,s)}};var po=function(e){return function(){return e}},fo=Ce?function(e,t){return Ce(e,"toString",{configurable:!0,enumerable:!1,value:po(t),writable:!0})}:Pr,vo=Date.now;var ho=function(e){var t=0,n=0;return function(){var r=vo(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(fo);var mo=function(e,t){return ho(uo(e,t,Pr),e+"")};var yo=function(e,t,n){(void 0!==n&&!_(e[t],n)||void 0===n&&!(t in e))&&Ie(e,t,n)};var go=function(e){return Ke(e)&&mt(e)},bo=Function.prototype,jo=Object.prototype,ko=bo.toString,xo=jo.hasOwnProperty,No=ko.call(Object);var Oo=function(e){if(!Ke(e)||"[object Object]"!=X(e))return!1;var t=zt(e);if(null===t)return!0;var n=xo.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ko.call(n)==No};var _o=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]};var wo=function(e){return We(e,xt(e))};var Lo=function(e,t,n,r,o,i,a){var s=_o(e,n),c=_o(t,n),l=a.get(c);if(l)yo(e,n,l);else{var u=i?i(s,c,n+"",e,t,a):void 0,d=void 0===u;if(d){var p=k(c),f=!p&&Xe(c),v=!p&&!f&&st(c);u=c,p||f||v?k(s)?u=s:go(s)?u=_t(s):f?(d=!1,u=Ot(c,!0)):v?(d=!1,u=pn(c,!0)):u=[]:Oo(c)||Ge(c)?(u=s,Ge(s)?u=wo(s):J(s)&&!ee(s)||(u=mn(c))):d=!1}d&&(a.set(c,u),o(u,c,r,i,a),a.delete(c)),yo(e,n,u)}};var Eo=function e(t,n,r,o,i){t!==n&&Cr(n,(function(a,s){if(i||(i=new Be),J(a))Lo(t,n,s,r,e,o,i);else{var c=o?o(_o(t,s),a,s+"",t,n,i):void 0;void 0===c&&(c=a),yo(t,s,c)}}),xt)};var Mo=function e(t,n,r,o,i,a){return J(t)&&J(n)&&(a.set(n,t),Eo(t,n,void 0,e,a),a.delete(n)),t};var Ro=function(e,t,n){if(!J(n))return!1;var r=typeof t;return!!("number"==r?mt(n)&&et(t,n.length):"string"==r&&t in n)&&_(n[t],e)};var So=function(e){return mo((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Ro(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))},To=So((function(e,t,n,r){Eo(e,t,n,r)})),zo=mo((function(e){return e.push(void 0,Mo),co(To,void 0,e)}));const Po=(e,t)=>zo(e,t),Ao=({key:e,defaultOptions:t,options:n})=>(({type:e,hotkey:t,clear:n})=>{if(t)return(r,o)=>{t&&(0,i.ZP)(t,r)&&(r.preventDefault(),so(o,e,n))}})(Po(n,t)[e]),$o=(e,t)=>!!Tn(e,t),Bo="p",Do=(e,t,n)=>{const{activeType:r,inactiveType:i=Bo}=t,a=$o(e,Object.assign(Object.assign({},n),{match:{type:r}}));a&&r===i||o.YR.setNodes(e,{type:a?i:r})},Co=({key:e,defaultOptions:t,options:n})=>(({type:e,defaultType:t,hotkey:n})=>{if(!n)return;const r=x(n);return(n,o)=>{for(const a of r)if((0,i.ZP)(a,n))return n.preventDefault(),void Do(o,{activeType:e,inactiveType:t})}})(Po(n,t)[e]),Io=(e,...t)=>n=>{n.preventDefault(),null===e||void 0===e||e(...t)};var Yo=function(e,t,n,r){if(!J(e))return e;for(var o=-1,i=(t=wr(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=Lr(t[o]),l=n;if(o!=a){var u=s[c];void 0===(l=r?r(u,c,s):void 0)&&(l=J(u)?u:et(t[o+1])?[]:{})}Fe(s,c,l),s=s[c]}return e};var Fo=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Er(e,a);n(s,a)&&Yo(i,wr(a,e),s)}return i};var Wo=function(e,t){if(null==e)return{};var n=Yn(Dt(e),(function(e){return[e]}));return t=Dr(t),Fo(e,n,(function(e,n){return t(e,n[0])}))};const qo=({type:e,component:t,rootProps:n,nodeToProps:r})=>({attributes:o,element:i,children:s})=>{var c;if(i.type===e){const e=null!==(c=null===r||void 0===r?void 0:r({attributes:o,element:i,children:s,rootProps:n}))&&void 0!==c?c:null===i||void 0===i?void 0:i.attributes;return(0,a.createElement)(t,Object.assign({attributes:o,htmlAttributes:e,element:i},Wo(n)),s)}},Ko=e=>({attributes:t,element:n,children:r})=>{var o;for(const{type:i,component:s,rootProps:c,nodeToProps:l}of e)if(n.type===i){const e=null!==(o=null===l||void 0===l?void 0:l({attributes:t,element:n,children:r,rootProps:c}))&&void 0!==o?o:null===n||void 0===n?void 0:n.attributes;return(0,a.createElement)(s,Object.assign({attributes:t,htmlAttributes:e,element:n},Wo(c)),r)}},Uo=({key:e,defaultOptions:t,options:n})=>(({type:e,component:t,rootProps:n})=>({children:r,leaf:o})=>o[e]&&o.text?(0,a.createElement)(t,Object.assign({leaf:o},Wo(n)),r):r)(Po(n,t)[e]),Vo=/^(?:\w+:)?\/\/(\S+)$/,Zo=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,Ho=/^[^\s.]+\.\S{2,}$/,Go=e=>{if("string"!==typeof e)return!1;const t=e.match(Vo);if(!t)return!1;const n=t[1];if(!n)return!1;try{new URL(e)}catch(r){return!1}return Zo.test(n)||Ho.test(n)},Qo=e=>(e.forEach((e=>{o.W_.isElement(e)&&Qo(e.children)})),e.length||e.push({text:""}),e);function Xo(e,...t){return t.reduce(((e,t)=>t(e)),e)}var Jo=Object.prototype,ei=Jo.hasOwnProperty,ti=mo((function(e,t){e=Object(e);var n=-1,r=t.length,o=r>2?t[2]:void 0;for(o&&Ro(t[0],t[1],o)&&(r=1);++n<r;)for(var i=t[n],a=xt(i),s=-1,c=a.length;++s<c;){var l=a[s],u=e[l];(void 0===u||_(u,Jo[l])&&!ei.call(e,l))&&(e[l]=i[l])}return e}));const ni=({node:e,source:t,apply:n,query:r})=>{qr([e,[]],r)&&n(e,t instanceof Function?t():t),$n(e)&&e.children.forEach((e=>{ni({node:e,source:t,apply:n,query:r})}))},ri=e=>{ni(Object.assign(Object.assign({},e),{apply:ti}))};var oi=So((function(e,t,n){Eo(e,t,n)}));const ii=e=>{ni(Object.assign(Object.assign({},e),{apply:oi}))},ai=({idKey:e="id",idCreator:t=(()=>Date.now()),filterText:n=!0,resetExistingID:r=!1,filter:i=(()=>!0),allow:a,exclude:s}={})=>c=>{const l=c,{apply:u}=l,d=()=>({[e]:t()});return l.removedIDs=new Set,l.apply=c=>{if("insert_node"===c.type){const e=e=>{const[t]=e;return i(e)&&n?o.W_.isElement(t):(e=>o.W_.isElement(e)||o.xv.isText(e))(t)},t=En(c.node);return(r?ii:ri)({node:t,source:d,query:{filter:e,allow:a,exclude:s}}),u(Object.assign(Object.assign({},c),{node:t}))}if("split_node"===c.type&&(!n||c.properties.type)){let n=c.properties[e];return l.removedIDs.has(n)?l.removedIDs.delete(n):n=t(),u(Object.assign(Object.assign({},c),{properties:Object.assign(Object.assign({},c.properties),{[e]:n})}))}return"merge_node"!==c.type||n&&!c.properties.type||l.removedIDs.add(c.properties.id),u(c)},l},si=(e,t={})=>{o.ML.withoutNormalizing(e,(()=>{const{moveNode:n,removeEmptyAncestor:r,reverse:i=!1,unit:a="character",distance:s=1,voids:c=!1}=t;let{at:l=e.selection,hanging:u=!1}=t;if(!l)return;if(o.e6.isRange(l)&&o.e6.isCollapsed(l)&&(l=l.anchor),o.E9.isPoint(l)){const t=o.ML.void(e,{at:l,mode:"highest"});if(!c&&t){const[,e]=t;l=e}else{const t={unit:a,distance:s};l={anchor:l,focus:i?o.ML.before(e,l,t)||o.ML.start(e,[]):o.ML.after(e,l,t)||o.ML.end(e,[])},u=!0}}if(o.y$.isPath(l))return void o.YR.removeNodes(e,{at:l,voids:c});if(o.e6.isCollapsed(l))return;u||(l=o.ML.unhangRange(e,l,{voids:c}));let[d,p]=o.e6.edges(l);const f=o.ML.above(e,{match:t=>o.ML.isBlock(e,t),at:d,voids:c}),v=o.ML.above(e,{match:t=>o.ML.isBlock(e,t),at:p,voids:c}),h=f&&v&&!o.y$.equals(f[1],v[1]),m=o.y$.equals(d.path,p.path),y=c?null:o.ML.void(e,{at:d,mode:"highest"}),g=c?null:o.ML.void(e,{at:p,mode:"highest"});if(y){const t=o.ML.before(e,d);t&&f&&o.y$.isAncestor(f[1],t.path)&&(d=t)}if(g){const t=o.ML.after(e,p);t&&v&&o.y$.isAncestor(v[1],t.path)&&(p=t)}const b=[];let j;for(const t of o.ML.nodes(e,{at:l,voids:c})){const[n,r]=t;j&&0===o.y$.compare(r,j)||(!c&&o.ML.isVoid(e,n)||!o.y$.isCommon(r,d.path)&&!o.y$.isCommon(r,p.path))&&(b.push(t),j=r)}const k=Array.from(b,(([,t])=>o.ML.pathRef(e,t))),x=o.ML.pointRef(e,d),N=o.ML.pointRef(e,p);if(!m&&!y){const t=x.current,[n]=o.ML.leaf(e,t),{path:r}=t,{offset:i}=d,a=n.text.slice(i);e.apply({type:"remove_text",path:r,offset:i,text:a})}for(const t of k){const n=t.unref();o.YR.removeNodes(e,{at:n,voids:c})}if(!g){const t=N.current,[n]=o.ML.leaf(e,t),{path:r}=t,i=m?d.offset:0,a=n.text.slice(i,p.offset);e.apply({type:"remove_text",path:r,offset:i,text:a})}!m&&h&&N.current&&x.current&&((e,t={})=>{o.ML.withoutNormalizing(e,(()=>{let{match:n,at:r=e.selection}=t;const{mergeNode:i,removeEmptyAncestor:a,hanging:s=!1,voids:c=!1,mode:l="lowest"}=t;if(!r)return;if(null==n)if(o.y$.isPath(r)){const[t]=o.ML.parent(e,r);n=e=>t.children.includes(e)}else n=t=>o.ML.isBlock(e,t);if(!s&&o.e6.isRange(r)&&(r=o.ML.unhangRange(e,r)),o.e6.isRange(r))if(o.e6.isCollapsed(r))r=r.anchor;else{const[,n]=o.e6.edges(r),i=o.ML.pointRef(e,n);o.YR.delete(e,{at:r}),r=i.unref(),null==t.at&&o.YR.select(e,r)}const[u]=o.ML.nodes(e,{at:r,match:n,voids:c,mode:l}),d=o.ML.previous(e,{at:r,match:n,voids:c,mode:l});if(!u||!d)return;const[p,f]=u,[v,h]=d;if(0===f.length||0===h.length)return;const m=o.y$.next(h),y=o.y$.common(f,h),g=o.y$.isSibling(f,h),b=Array.from(o.ML.levels(e,{at:f}),(([e])=>e)).slice(y.length).slice(0,-1),j=o.ML.above(e,{at:f,mode:"highest",match:e=>b.includes(e)&&o.W_.isElement(e)&&1===e.children.length}),k=j&&o.ML.pathRef(e,j[1]);let x,N;if(o.xv.isText(p)&&o.xv.isText(v)){const e=eo(p,["text"]);N=v.text.length,x=e}else{if(!o.W_.isElement(p)||!o.W_.isElement(v))throw new Error(`Cannot merge the node at path [${f}] with the previous sibling because it is not the same kind: ${JSON.stringify(p)} ${JSON.stringify(v)}`);{const e=eo(p,["children"]);N=v.children.length,x=e}}if(g||i||o.YR.moveNodes(e,{at:f,to:m,voids:c}),k)if(a){const t=k.current;t&&a(e,{at:t})}else o.YR.removeNodes(e,{at:k.current,voids:c});o.W_.isElement(v)&&o.ML.isEmpty(e,v)||o.xv.isText(v)&&""===v.text?o.YR.removeNodes(e,{at:h,voids:c}):i?i(e,{at:f,to:m}):e.apply({type:"merge_node",path:m,position:N,properties:x}),k&&k.unref()}))})(e,{at:N.current,hanging:!0,voids:c,mergeNode:n,removeEmptyAncestor:r});const O=N.unref()||x.unref();null==t.at&&O&&o.YR.select(e,O)}))},ci=(e,t,n)=>{o.YR.insertNodes(e,{type:t,children:[{text:""}]},Rn(e,n))},li=(e,{at:t,to:n,match:r,start:i=0})=>{let a=0;const s=o.y$.isPath(t)?t:t[1],c=o.y$.isPath(t)?o.NB.get(e,s):t[0];if(!o.ML.isBlock(e,c))return a;for(let l=c.children.length-1;l>=i;l--){const t=[...s,l],i=Bn(e,t);(!r||i&&r([i,t]))&&(o.YR.moveNodes(e,{at:t,to:n}),a++)}return a},ui=(e,t)=>{o.YR.unwrapNodes(e,Rn(e,t))},di=(e,t,n={})=>{Dn(e,n),o.YR.wrapNodes(e,t,n)},pi=({children:e})=>(0,s.createPortal)(e,document.body),fi=({className:e})=>({root:[e,{}]}),vi=(0,c.y)(),hi=((0,l.z)((({children:e,styles:t,className:n,as:r="div"})=>{const o=vi(t,{className:n}),i=r;return(0,a.createElement)(i,{className:o.root},e)}),fi,void 0,{scope:"StyledComponent"}),(0,c.y)()),mi=(0,l.z)((({attributes:e,children:t,className:n,styles:r,htmlAttributes:o,as:i="div"})=>{const s=hi(r,{className:n}),c=i;return(0,a.createElement)(c,Object.assign({},e,{className:s.root},o),t)}),fi,void 0,{scope:"StyledElement"}),yi=(0,c.y)(),gi=(0,l.z)((({attributes:e,children:t,className:n,styles:r,as:o="span"})=>{const i=yi(r,{className:n}),s=o;return(0,a.createElement)(s,Object.assign({},e,{className:i.root}),t)}),fi,void 0,{scope:"StyledLeaf"}),bi="slate-Toolbar",ji=(0,u.NF)((e=>(0,p.E$)({root:[bi,{display:"flex",alignItems:"center",boxSizing:"content-box",userSelect:"none",minHeight:40,color:"rgb(68, 68, 68)"}]},e))),ki=(0,c.y)(),xi=(0,a.forwardRef)((({className:e,styles:t,children:n},r)=>{const o=ki(t,{className:e});return(0,a.createElement)("div",{"data-testid":"Toolbar",className:o.root,ref:r},n)})),Ni="slate-BalloonToolbar";(0,u.NF)(((e,t,n,r,o,i,a)=>{let s,c="rgb(157, 170, 182)",l="white",u="rgb(36, 42, 49)",d="transparent";"light"===n&&(c="rgba(0, 0, 0, 0.50)",l="black",u="rgb(250, 250, 250)",d="rgb(196, 196, 196)");let f={},v={};return a&&(f={left:"50%",content:'" "',position:"absolute",marginTop:"-1px",transform:"translateX(-50%)",borderColor:`${u} transparent`,borderStyle:"solid"},"top"===i?(f=Object.assign(Object.assign({},f),{top:"100%",bottom:"auto",borderWidth:"8px 8px 0px"}),"light"===n&&(v=Object.assign(Object.assign({},f),{marginTop:0,borderWidth:"9px 9px 0px",borderColor:`${d} transparent`}))):(f=Object.assign(Object.assign({},f),{top:"auto",bottom:"100%",borderWidth:"0px 8px 8px"}),"light"===n&&(v=Object.assign(Object.assign({},f),{marginTop:0,borderWidth:"0px 9px 9px",borderColor:`${d} transparent`})))),s="top"===i?-9:9,(0,p.E$)({root:[Ni,{position:"absolute",zIndex:500,background:u,color:c,whiteSpace:"nowrap",visibility:"hidden",border:"solid #000",borderRadius:4,borderWidth:1,borderColor:d,padding:"0 4px",marginTop:s,transition:o?"":"top 75ms ease-out,left 75ms ease-out",selectors:{"::before":v,"::after":f,".slate-ToolbarButton-active, .slate-ToolbarButton:hover":{color:l}}},!r&&{visibility:"visible"},e]},t)}));var Oi,_i=C((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),r=a.useRef(),o=a.useRef(e),i=a.useCallback((function(){return n.current}),[]),s=a.useCallback((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,o.current()}),t)}),[t]),c=a.useCallback((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return a.useEffect((function(){o.current=e}),[e]),a.useEffect((function(){return s(),c}),[t]),[i,c,s]}}));(Oi=_i)&&Oi.__esModule&&Object.prototype.hasOwnProperty.call(Oi,"default")&&Oi.default;const wi="slate-HeadingToolbar",Li=((0,l.z)(xi,(({className:e}={})=>{const t={root:[wi,{position:"relative",padding:"1px 18px 17px",margin:"0 -20px",borderBottom:"2px solid #eee",marginBottom:"20px",selectors:{".slate-ToolbarButton-active, .slate-ToolbarButton:hover":{color:"#06c"}}},e]};return(0,p.E$)(ji(),t)})(),void 0,{scope:"HeadingToolbar"}),"slate-ToolbarButton"),Ei="slate-ToolbarButton-active",Mi=(0,c.y)(),Ri=(0,l.z)((({className:e,styles:t,icon:n,tooltip:r,active:o,onMouseDown:i})=>{const s={onMouseDown:i},c=Mi(t,{className:e,active:o}),l=Object.assign({content:"",arrow:!0,offset:[0,17],delay:0,duration:[200,0],hideOnClick:!1},r),u=(0,a.createElement)("span",Object.assign({"data-testid":"ToolbarButton",className:c.root},s),n);return r?(0,a.createElement)(f.ZP,Object.assign({},l),u):u}),(({className:e,active:t}={})=>({root:[Li,{display:"flex",justifyContent:"center",alignItems:"center",width:"28px",height:"24px",userSelect:"none",cursor:"pointer",verticalAlign:"middle",selectors:{"> svg":{display:"block",width:"20px",height:"20px"}}},t&&Ei,e]})),void 0,{scope:"ToolbarButton"}),Si=(0,c.y)();(0,l.z)((({children:e,attributes:t,styles:n,className:r,leaf:o})=>{const i=Si(n,Object.assign({className:r},o));return(0,a.createElement)("span",Object.assign({},t,{className:i.root}),e)}),(({className:e,title:t,list:n,italic:r,hr:o,code:i,bold:a,blockquote:s})=>{let c={};return a&&(c=Object.assign(Object.assign({},c),{fontWeight:"bold"})),r&&(c=Object.assign(Object.assign({},c),{fontStyle:"italic"})),t&&(c=Object.assign(Object.assign({},c),{display:"inline-block",fontWeight:"bold",fontSize:"20px",margin:"20px 0 10px 0"})),n&&(c=Object.assign(Object.assign({},c),{paddingLeft:"10px",fontSize:"20px",lineHeight:"10px"})),o&&(c=Object.assign(Object.assign({},c),{display:"block",textAlign:"center",borderBottom:"2px solid #ddd"})),s&&(c=Object.assign(Object.assign({},c),{display:"inline-block",borderLeft:"2px solid #ddd",paddingLeft:"10px",color:"#aaa",fontStyle:"italic"})),i&&(c=Object.assign(Object.assign({},c),{fontFamily:"monospace",backgroundColor:"#eee",padding:"3px"})),{root:[c,e]}}),void 0,{scope:"PreviewLeaf"});!function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?!\n|\r\n?))/.source;function n(e){return e=e.replace(/<inner>/g,(function(){return t})),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,o=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|$)/.source.replace(/__/g,(function(){return r})),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+o+i+"(?:"+o+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+o+i+")(?:"+o+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+o+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+o+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/``.+?``|`[^`\r\n]+`/,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+?\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)| ?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{variable:{pattern:/(\[)[^\]]+(?=\]$)/,lookbehind:!0},content:{pattern:/(^!?\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),["url","bold","italic","strike"].forEach((function(t){["url","bold","italic","strike"].forEach((function(n){t!==n&&(e.languages.markdown[t].inside.content.inside[n]=e.languages.markdown[n])}))})),e.hooks.add("after-tokenize",(function(e){"markdown"!==e.language&&"md"!==e.language||function e(t){if(t&&"string"!==typeof t)for(var n=0,r=t.length;n<r;n++){var o=t[n];if("code"===o.type){var i=o.content[1],a=o.content[3];if(i&&a&&"code-language"===i.type&&"code-block"===a.type&&"string"===typeof i.content){var s=i.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),c="language-"+(s=(/[a-z][\w-]*/i.exec(s)||[""])[0].toLowerCase());a.alias?"string"===typeof a.alias?a.alias=[a.alias,c]:a.alias.push(c):a.alias=[c]}}else e(o.content)}}(e.tokens)})),e.hooks.add("wrap",(function(t){if("code-block"===t.type){for(var n="",r=0,o=t.classes.length;r<o;r++){var i=t.classes[r],a=/language-(.+)/.exec(i);if(a){n=a[1];break}}var s=e.languages[n];if(s){var c=t.content.replace(/&lt;/g,"<").replace(/&amp;/g,"&");t.content=e.highlight(c,s,n)}else if(n&&"none"!==n&&e.plugins.autoloader){var l="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=l,e.plugins.autoloader.loadLanguages(n,(function(){var t=document.getElementById(l);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))}))}}})),e.languages.md=e.languages.markdown}(Prism);const Ti=(e,t,n,r)=>{var o;if(!n.current)return;if(e.id===r)return;const i=null===(o=n.current)||void 0===o?void 0:o.getBoundingClientRect(),a=(i.bottom-i.top)/2,s=t.getClientOffset();if(!s)return;const c=s.y-i.top;return c<a?"top":c>=a?"bottom":void 0},zi=({id:e,blockRef:t,removePreview:n})=>{const r=(0,d.jE)(),[i,s]=(0,a.useState)(""),[{isDragging:c},l,u]=((e,t)=>(0,y.c)((()=>({item:{type:"block",id:t},collect:e=>({isDragging:e.isDragging()}),begin:()=>{document.body.classList.add("dragging")},end:()=>{document.body.classList.remove("dragging")}})),[]))(0,e),[{isOver:p},f]=((e,{blockRef:t,id:n,dropLine:r,setDropLine:i})=>(0,g.L)({accept:"block",drop:(r,i)=>{var a,s;const c=Ti(r,i,t,n);if(!c)return;const l=Tn(e,{at:[],match:{id:r.id}});if(!l)return;const[,u]=l;let p;if(d.F3.focus(e),"bottom"===c){if(p=null===(a=Tn(e,{at:[],match:{id:n}}))||void 0===a?void 0:a[1],!p)return;if(o.y$.equals(u,o.y$.next(p)))return}if("top"===c){const t=null===(s=Tn(e,{at:[],match:{id:n}}))||void 0===s?void 0:s[1];if(!t)return;if(p=[...t.slice(0,-1),t[t.length-1]-1],o.y$.equals(u,p))return}if(c){const t=p,n=o.y$.isBefore(u,t)&&o.y$.isSibling(u,t)?t:o.y$.next(t);o.YR.moveNodes(e,{at:u,to:n})}},collect:e=>({isOver:e.isOver()}),hover(a,s){const c=Ti(a,s,t,n),l=(u=r,!(p=c)&&u?"":"top"===p&&"top"!==u?"top":"bottom"===p&&"bottom"!==u?"bottom":void 0);var u,p;l&&i(l),c&&Qr(e.selection)&&(d.F3.focus(e),o.YR.collapse(e))}}))(r,{id:e,blockRef:t,dropLine:i,setDropLine:s});return n?(f(t),u((0,m.r)(),{captureDraggingState:!0})):u(f(t)),!p&&i&&s(""),{isDragging:c,dropLine:i,dragRef:l}},Pi=()=>a.createElement("div",{style:{fontSize:12}},a.createElement("div",null,"Drag ",a.createElement("span",{style:{color:"rgba(255, 255, 255, 0.45)"}},"to move"))),Ai={content:a.createElement(Pi,null),placement:"bottom",arrow:!1,offset:[0,0],delay:[300,0],duration:[0,0],hideOnClick:!0,theme:"small"},$i="slate-Selectable",Bi="slate-gutter-left",Di=(0,c.y)(),Ci=((0,l.z)((({children:e,element:t,className:n,styles:r,componentRef:o,dragIcon:i})=>{const s=(0,a.useRef)(null),c=(0,a.useRef)(null),l=(0,h.Z)(o,c),{dropLine:u,dragRef:d,isDragging:v}=zi({id:t.id,blockRef:c}),m=(0,a.useRef)(null),y=(0,h.Z)(d,m),g=Di(r,{className:n,direction:u,isDragging:v});return a.createElement("div",{className:g.root,ref:l},a.createElement("div",{ref:s,className:(0,p.y0)(g.blockAndGutter,g.block)},e,!!u&&a.createElement("div",{className:g.dropLine,contentEditable:!1})),a.createElement("div",{className:(0,p.y0)(g.blockAndGutter,g.gutterLeft),contentEditable:!1},a.createElement("div",{className:g.blockToolbarWrapper},a.createElement("div",{className:g.blockToolbar},a.createElement(f.ZP,Object.assign({},Ai),a.createElement("div",{ref:y},a.createElement("button",{type:"button",className:g.dragButton,onMouseDown:e=>e.stopPropagation()},i)))))))}),(({className:e,direction:t,isDragging:n,selected:r})=>({root:[$i,{position:"relative",opacity:n?.5:1,backgroundColor:r?"rgb(181, 215, 255)":void 0,selectors:{":hover .slate-gutter-left":{opacity:1}}},e],block:{},blockAndGutter:{paddingTop:3,paddingBottom:3},gutterLeft:[{position:"absolute",top:0,transform:"translateX(-100%)",display:"flex",height:"100%",opacity:0},Bi],blockToolbarWrapper:{display:"flex",height:"1.5em"},blockToolbar:{width:18,height:18,marginRight:4,pointerEvents:"auto"},dragButton:{minWidth:18,height:18,padding:0,backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",cursor:"pointer",overflow:"hidden",outline:"none"},dropLine:{position:"absolute",left:0,right:0,top:"top"===t?-1:void 0,bottom:"bottom"===t?-1:void 0,height:2,opacity:1,background:"#B4D5FF"}})),void 0,{scope:"Selectable"}),e=>t=>{var n;const r=(e=>{if(e.nodeType===Node.TEXT_NODE)return"\n"===e.nodeValue?null:e.textContent})(t);if(r)return r;if(t.nodeType!==Node.ELEMENT_NODE)return null;const i=t,a=(e=>{if("BR"===e.nodeName)return"\n"})(t);if(a)return a;const{nodeName:s}=t;let c=t;"PRE"===s&&"CODE"===(null===(n=t.childNodes[0])||void 0===n?void 0:n.nodeName)&&([c]=t.childNodes);const l=Array.from(c.childNodes).map(Ci(e)).flat(),u=(({element:e,children:t})=>{if("BODY"===e.nodeName)return(0,b.t)("fragment",{},t)})({element:i,children:l});if(u)return u;const d=(({plugins:e,element:t,children:n})=>{let r,o;if(e.some((({deserialize:e})=>{if(null===e||void 0===e?void 0:e.element)return e.element.some((e=>{const n=e.deserialize(t);if(n)return r=n,o=e.withoutChildren,!0}))})),r){let e=n;return e.length&&!o||(e=[{text:""}]),(0,b.t)("element",r,e)}})({plugins:e,element:i,children:l});return d||(({plugins:e,element:t,children:n})=>{let r={};return e.forEach((({deserialize:e})=>{(null===e||void 0===e?void 0:e.leaf)&&e.leaf.forEach((e=>{const n=e.deserialize(t);n&&(r=Object.assign(Object.assign({},r),n))}))})),n.reduce(((e,t)=>t?(o.W_.isElement(t)?(Object.keys(r).length&&ii({node:t,source:r,query:{filter:([e])=>o.xv.isText(e)}}),e.push(t)):e.push((0,b.t)("text",r,t)),e):e),[])})({plugins:e,element:i,children:l})}),Ii=({plugins:e,element:t})=>{"string"===typeof t&&(t=(e=>{const t=document.createElement("body");return t.innerHTML=e.replace(/(\r\n|\n|\r|\t)/gm,""),t})(t));const n=(({plugins:e,element:t})=>Ci(e)(t))({plugins:e,element:t});return Qo(n)},Yi=(e={})=>{var{plugins:t=[]}=e,n=eo(e,["plugins"]);return e=>{const{insertData:i}=e,{preInsert:a=(n=>{const i=(0,r.tm)(t),a=n[0].type;return Zr(e)&&a&&!i.includes(a)&&o.YR.setNodes(e,{type:n[0].type}),n}),insert:s=(t=>{o.YR.insertFragment(e,t)})}=n;return e.insertData=e=>{const n=e.getData("text/html");if(n){const{body:e}=(new DOMParser).parseFromString(n,"text/html");let r=Ii({plugins:t,element:e});return r=a(r),void s(r)}i(e)},e}};const Fi=(0,c.y)(),Wi=(0,l.z)((({attributes:e,children:t,className:n,styles:r,htmlAttributes:o})=>{const i=Fi(r,{className:n});return(0,a.createElement)("blockquote",Object.assign({},e,{className:i.root},o),t)}),(({className:e})=>({root:[{borderLeft:"2px solid #ddd",padding:"10px 20px 10px 16px",color:"#aaa",margin:"8px 0"},e]})),void 0,{scope:"BlockquoteElement"}),qi="blockquote",Ki={blockquote:{component:Wi,type:qi,hotkey:"mod+shift+.",rootProps:{className:"slate-blockquote",as:"blockquote"}}},Ui=(0,c.y)(),Vi=(0,l.z)((({attributes:e,children:t,className:n,styles:r,htmlAttributes:o})=>{const i=Ui(r,{className:n});return(0,a.createElement)("pre",Object.assign({},e,{className:i.root},o),(0,a.createElement)("code",null,t))}),(({className:e})=>({root:[{fontSize:"16px",padding:"12px 16px",backgroundColor:"rgb(247, 246, 243)",borderRadius:"3px",whiteSpace:"pre-wrap",fontFamily:'SFMono-Regular, Consolas, Monaco, "Liberation Mono", Menlo, Courier, monospace;',tabSize:"2",lineHeight:"normal"},e]})),void 0,{scope:"CodeBlockElement"}),Zi=(0,c.y)(),Hi=(0,l.z)((({attributes:e,children:t,className:n,styles:r,htmlAttributes:o})=>{const i=Zi(r,{className:n});return(0,a.createElement)("div",Object.assign({},e,{className:i.root},o),t)}),(({className:e})=>({root:[{},e]})),void 0,{scope:"CodeBlockElement"}),Gi="code_block",Qi={code_block:{component:Vi,type:Gi,hotkey:["mod+opt+8","mod+shift+8"],rootProps:{className:"slate-code-block"}},code_line:{component:Hi,type:"code_line",rootProps:{className:"slate-code-line"}}},Xi="h1",Ji="h2",ea="h3",ta="h4",na="h5",ra="h6",oa={h1:{component:mi,type:Xi,rootProps:{className:`slate-${Xi}`,as:"h1",styles:{root:{fontWeight:"400",marginTop:0,marginBottom:"12px",fontSize:320/11+"px",lineHeight:"36px",selectors:{":not(:first-child)":{marginTop:"30px"}}}}}},h2:{component:mi,type:Ji,rootProps:{className:`slate-${Ji}`,as:"h2",styles:{root:{fontWeight:"400",marginTop:0,marginBottom:"7.199999999999999px",fontSize:256/11+"px",lineHeight:"28px",selectors:{":not(:first-child)":{marginTop:"18px"}}}}}},h3:{component:mi,type:ea,rootProps:{className:`slate-${ea}`,as:"h3",styles:{root:{color:"#434343",fontWeight:"400",marginTop:0,marginBottom:"6px",fontSize:224/11+"px",selectors:{":not(:first-child)":{marginTop:"8px"}}}}}},h4:{component:mi,type:ta,rootProps:{className:`slate-${ta}`,as:"h4",styles:{root:{color:"#666666",fontWeight:"400",marginTop:0,marginBottom:"4.8px",fontSize:192/11+"px",selectors:{":not(:first-child)":{marginTop:"8px"}}}}}},h5:{component:mi,type:na,rootProps:{className:`slate-${na}`,as:"h5",styles:{root:{color:"#666666",fontWeight:"400",marginTop:0,marginBottom:"4.8px",fontSize:"16px",selectors:{":not(:first-child)":{marginTop:"8px"}}}}}},h6:{component:mi,type:ra,rootProps:{className:`slate-${ra}`,as:"h6",styles:{root:{color:"#666666",fontWeight:"400",fontStyle:"italic",marginTop:0,marginBottom:"4.8px",fontSize:"16px",selectors:{":not(:first-child)":{marginTop:"8px"}}}}}},levels:6},ia=({className:e})=>({root:[{textDecoration:"initial",color:"#0078d4",selectors:{":hover, :visited:hover":{color:"#004578",textDecoration:"underline"},":visited":{color:"#0078d4"}}},e]}),aa=(0,c.y)(),sa=(0,l.z)((({attributes:e,children:t,element:n,styles:r,className:o,htmlAttributes:i})=>{const s=aa(r,{className:o});return(0,a.createElement)("a",Object.assign({},e,{href:n.url,className:s.root},i),t)}),ia,void 0,{scope:"LinkElement"}),ca={link:{component:sa,type:"a",attribute:"url",isUrl:Go,rootProps:{className:"slate-link"}}},la="p",ua={p:{component:mi,type:la,hotkey:["mod+opt+0","mod+shift+0"],rootProps:{className:`slate-${la}`,as:"p"}}},da="ul",pa=Object.assign({ul:{component:mi,type:da,rootProps:{className:"slate-ul",as:"ul",styles:{root:{paddingInlineStart:"24px",marginBlockStart:"0",marginBlockEnd:"0"}}}},ol:{component:mi,type:"ol",rootProps:{className:"slate-ol",as:"ol",styles:{root:{paddingInlineStart:"24px",marginBlockStart:"0",marginBlockEnd:"0"}}}},li:{component:mi,type:"li",rootProps:{className:"slate-li",as:"li"}}},ua),fa="slate-todo-list-checked",va=(0,c.y)(),ha={todo_li:{component:(0,l.z)((({attributes:e,children:t,element:n,className:r,styles:i,htmlAttributes:s})=>{const c=(0,d.jE)(),l=(0,d.GQ)(),{checked:u}=n,p=va(i,{className:r,checked:u});return(0,a.createElement)("div",Object.assign({},e,{className:p.root},s),(0,a.createElement)("div",{contentEditable:!1,className:p.checkboxWrapper},(0,a.createElement)("input",{"data-testid":"TodoListElementCheckbox",className:p.checkbox,type:"checkbox",checked:!!u,onChange:e=>{const t=d.F3.findPath(c,n);o.YR.setNodes(c,{checked:e.target.checked},{at:t})}})),(0,a.createElement)("span",{className:p.text,contentEditable:!l,suppressContentEditableWarning:!0},t))}),(({className:e,checked:t})=>{let n=e;return t&&(n+=" slate-todo-list-checked"),{root:[{display:"flex",flexDirection:"row",padding:"3px 0"},n],checkboxWrapper:{userSelect:"none",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",marginRight:"6px"},checkbox:{width:"16px",height:"16px",margin:"0"},text:{flex:1,opacity:t?.666:1,textDecoration:t?"line-through":"none",selectors:{":focus":{outline:"none"}}}}}),void 0,{scope:"TodoListElement"}),type:"action_item",hotkey:["mod+opt+4","mod+shift+4"],rootProps:{className:"slate-todo-list"}}},ma=e=>{const{todo_li:t}=Po(e,ha);return{element:ro({type:t.type,node:e=>({type:t.type,checked:e.classList.contains(fa)}),rules:[{className:t.rootProps.className}]})}},ya=e=>{const{todo_li:t}=Po(e,ha);return qo(t)},ga=e=>({renderElement:ya(e),deserialize:ma(e),onKeyDown:Co({key:"todo_li",defaultOptions:ha,options:e})}),ba=e=>{var t;const{blockquote:n}=Po(e,Ki);return{element:oo(Object.assign({type:n.type,rules:[{nodeNames:"BLOCKQUOTE"}]},null===(t=null===e||void 0===e?void 0:e.blockquote)||void 0===t?void 0:t.deserialize))}},ja=e=>{const{blockquote:t}=Po(e,Ki);return qo(t)},ka=e=>({renderElement:ja(e),deserialize:ba(e),onKeyDown:Co({key:"blockquote",defaultOptions:Ki,options:e})}),xa=e=>t=>{const n=[],[r,i]=t,{code_block:a}=Po(e,Qi);if(r.type===a.type){const e=o.NB.string(r),t="javascript",a=v.languages[t],s=(0,v.tokenize)(e,a);let c=0;for(const r of s)if("string"===typeof r)c+=r.length;else{const e=r;n.push({anchor:{path:i,offset:c},focus:{path:i,offset:c+e.length},className:`prism-token token ${e.type} `,prism:!0}),c+=e.length}}return n},Na=e=>{var t,n;const{code_block:r,code_line:o}=Po(e,Qi);return{element:[...oo(Object.assign({type:r.type,rules:[{nodeNames:"PRE"},{className:r.rootProps.className}]},null===(t=null===e||void 0===e?void 0:e.code_block)||void 0===t?void 0:t.deserialize)),...oo(Object.assign({type:o.type,rules:[{className:o.rootProps.className}]},null===(n=null===e||void 0===e?void 0:e.code_line)||void 0===n?void 0:n.deserialize))]}},Oa=(e,{at:t=e.selection}={},n)=>{const{code_line:r}=Po(n,Qi);if(t&&$o(e,{at:t,match:{type:r.type}})){const n=In(e,t);if(!n)return;const[,o]=n,i=zn(e,{at:t,match:{type:r.type}})||In(e,o);if(!i)return;const[a,s]=i;if(a.type!==r.type)return;const c=In(e,s);if(!c)return;return{codeBlock:c,codeLine:i}}},_a=(e,{codeLine:t})=>{var n;const[,r]=t,i=o.ML.start(e,r);if(!Qr(e.selection)){const t=null===(n=e.selection)||void 0===n?void 0:n.anchor,r=o.ML.range(e,i,t),a=o.ML.string(e,r);if(/\S/.test(a))return void o.YR.insertText(e,"  ",{at:e.selection})}o.YR.insertText(e,"  ",{at:i})},wa=(e,{codeLine:t})=>{const[,n]=t,r=o.ML.start(e,n),i=r&&o.ML.after(e,r),a=i&&o.ML.range(e,r,i),s=Vr(e,a);return!!/\s/.test(s)&&(o.YR.delete(e,{at:a}),!0)},La=(e,{codeBlock:t,codeLine:n})=>{wa(e,{codeBlock:t,codeLine:n})&&wa(e,{codeBlock:t,codeLine:n})},Ea=e=>(t,n)=>{if("Tab"===t.key){const r=t.shiftKey,o=Oa(n,{},e);if(o){const{codeBlock:e,codeLine:i}=o;t.preventDefault(),r&&La(n,{codeBlock:e,codeLine:i});return void(!t.shiftKey&&_a(n,{codeBlock:e,codeLine:i}))}const i=((e,{at:t=e.selection}={},n)=>{if(!t)return;const{code_line:r}=Po(n,Qi);return[...Cn(e,{at:t,match:{type:r.type}})]})(n,{},e);if(i&&(null===i||void 0===i?void 0:i[0])){t.preventDefault();const[,e]=i[0],o=In(n,e);for(const a of i){r&&La(n,{codeBlock:o,codeLine:a});!t.shiftKey&&_a(n,{codeBlock:o,codeLine:a})}}}if("a"===t.key&&(t.metaKey||t.ctrlKey)){const r=Oa(n,{},e);if(!r)return;const{codeBlock:i}=r,[,a]=i;o.YR.select(n,a),t.preventDefault(),t.stopPropagation()}},Ma=e=>{const{code_block:t,code_line:n}=Po(e,Qi);return Ko([t,n])},Ra=e=>({renderElement:Ma(e),renderLeaf:({leaf:e,children:t})=>e.prism&&e.text?(0,a.createElement)("span",{className:null===e||void 0===e?void 0:e.className},t):t,deserialize:Na(e),decorate:xa(),onKeyDown:Ea(e)}),Sa=e=>t=>{const{h1:n,h2:r,h3:o,h4:i,h5:a,h6:s,levels:c}=Po(e,oa),l=[],u=(e,t)=>{c>=e&&l.push(t)};return u(1,n),u(2,r),u(3,o),u(4,i),u(5,a),u(6,s),Ko(l)(t)},Ta=e=>{const{p:t}=Po(e,ua);return qo(t)},za=({className:e,focused:t,selected:n})=>({root:[{},e],img:{display:"block",maxWidth:"100%",maxHeight:"20em",padding:"10px 0",boxShadow:t&&n?"0 0 0 3px #B4D5FF":"none"}}),Pa=(0,c.y)(),Aa=(0,l.z)((({attributes:e,children:t,element:n,className:r,styles:o,htmlAttributes:i})=>{const{url:s}=n,c=(0,d.UE)(),l=(0,d.vt)(),u=Pa(o,{className:r,focused:c,selected:l});return(0,a.createElement)("div",Object.assign({},e,{className:u.root}),(0,a.createElement)("div",{contentEditable:!1},(0,a.createElement)("img",Object.assign({"data-testid":"ImageElementImage",className:u.img,src:s,alt:""},i))),t)}),za,void 0,{scope:"ImageElement"}),$a="img",Ba={img:{component:Aa,type:$a,rootProps:{className:"slate-img"}}},Da=(e,t,n)=>{const{img:r}=Po(n,Ba),i={type:r.type,url:t,children:[{text:""}]};o.YR.insertNodes(e,i)},Ca=e=>{var t;const{img:n}=Po(e,Ba);return{element:ro(Object.assign({type:n.type,node:e=>({type:n.type,url:e.getAttribute("src")}),rules:[{nodeNames:"IMG"}]},null===(t=null===e||void 0===e?void 0:e.img)||void 0===t?void 0:t.deserialize))}},Ia=e=>{const{img:t}=Po(e,Ba);return qo(t)},Ya=e=>{const{img:t}=Po(e,Ba);return{renderElement:Ia(e),deserialize:Ca(e),voidTypes:[t.type]}},Fa=e=>{if(!Go(e))return!1;const t=new URL(e).pathname.split(".").pop();return j.includes(t)},Wa=(e,t,n)=>{const{at:r,link:o}=Po(n,ca);di(e,{type:o.type,url:t,children:[]},{at:r,split:!0})},qa=(e,t,n)=>{if(!e.selection)return;const{link:r,wrap:i}=Po(n,ca);if(!i&&Hr(e.selection))return o.YR.insertNodes(e,{type:r.type,url:t,children:[{text:t}]});if(i&&Hr(e.selection)){const t=o.ML.leaf(e,e.selection),[,n]=t;o.YR.select(e,n)}ui(e,{at:e.selection,match:{type:r.type}}),Wa(e,t,{link:r,at:e.selection}),o.YR.collapse(e,{edge:"end"})},Ka=e=>{var t;const{link:n}=Po(e,ca);return{element:ro(Object.assign({type:n.type,node:e=>({type:n.type,url:e.getAttribute("href")}),rules:[{nodeNames:"A"}]},null===(t=null===e||void 0===e?void 0:e.link)||void 0===t?void 0:t.deserialize))}},Ua=e=>{const{link:t}=Po(e,ca);return qo(t)},Va=e=>{const{link:t}=Po(e,ca);return{renderElement:Ua(e),deserialize:Ka(e),inlineTypes:[t.type]}},Za=(e,t,n)=>{var{at:r}=n,o=eo(n,["at"]);const{link:i}=Po(o,ca);ui(e,{at:r,match:{type:i.type}});const a=e.selection;Wa(e,t,{link:i,at:Object.assign(Object.assign({},r),{focus:a.focus})})},Ha=e=>t=>{const{link:n,isUrl:r}=Po(e,Object.assign(Object.assign({},ca),{isUrl:Go})),{insertData:i,insertText:a}=t,s=Object.assign(Object.assign({},{matchString:" ",skipInvalid:!0,afterMatch:!0,multiPaths:!0}),Mr(e,"rangeBeforeOptions",{}));return t.insertText=e=>{if(" "===e&&Hr(t.selection)){const o=t.selection;if(((e,{link:t,isUrl:n})=>{const r=Ur(e),o=Vr(e,r);if(r&&n(o))return Za(e,o,{at:r,link:t}),!0})(t,{link:n,isUrl:r}))return a(e);const i=Kr(t,o,s);if(i){const e=Vr(t,i);r(e)&&Za(t,e,{at:i,link:n})}}a(e)},t.insertData=e=>{const o=e.getData("text/plain");if(o){if($o(t,{match:{type:n.type}}))return a(o);if(r(o))return qa(t,o,{link:n})}i(e)},t=(e=>t=>{const n=x(e.type),{normalizeNode:r}=t;return t.normalizeNode=([e,i])=>{e.type&&n.includes(e.type)&&""===o.NB.string(e)?o.YR.removeNodes(t,{at:i}):r([e,i])},t})({type:n.type})(t)},Ga=(e,t)=>{const{li:n,ul:r,ol:o}=Po(t,pa);ui(e,{match:{type:n.type}}),ui(e,{match:{type:[r.type,o.type]},split:!0})},Qa=(e,t)=>{var{typeList:n}=t,r=eo(t,["typeList"]);if(!e.selection)return;const{p:i,li:a}=Po(r,pa),s=$o(e,{match:{type:n}});if(Ga(e,r),o.YR.setNodes(e,{type:i.type}),!s){di(e,{type:n,children:[]});const t=[...Cn(e,{match:{type:i.type}})],r={type:a.type,children:[]};for(const[,n]of t)o.YR.wrapNodes(e,r,{at:n})}},Xa=e=>{const{ul:t,ol:n}=Po(e,pa);return[n.type,t.type]},Ja=(e,{validLiChildrenTypes:t},n)=>{const{li:r}=Po(n,pa),{normalizeNode:i}=e;return([a,s])=>{if(Mn(a,{type:Xa(n)})&&!a.children.length)return o.YR.removeNodes(e,{at:s});a.type===r.type&&((e,{nodeEntry:t,validLiChildrenTypes:n=[]},r)=>{var i;const{p:a,ul:s,ol:c}=Po(r,pa),l=[s.type,c.type,a.type,...n],[u,d]=t,p=d.concat([0]),f=null===(i=u.children)||void 0===i?void 0:i[0];if(!f)return ci(e,a.type,{at:p}),!0;const v=(e=>{const[t,n]=e;return(t.children||[]).map(((e,t)=>[e,n.concat([t])]))})(t).filter((([e])=>!l.includes(e.type))).map((([,t])=>o.ML.pathRef(e,t)));f.type!==a.type&&ci(e,a.type,{at:p});for(const h of v.reverse()){const t=h.unref();t&&o.YR.moveNodes(e,{at:t,to:p.concat([0])})}return v.length>0})(e,{nodeEntry:[a,s],validLiChildrenTypes:t},n)||i([a,s])}},es=e=>{var t,n,r;const{li:o,ul:i,ol:a}=Po(e,pa);return{element:[...oo(Object.assign({type:i.type,rules:[{nodeNames:"UL"}]},null===(t=null===e||void 0===e?void 0:e.ul)||void 0===t?void 0:t.deserialize)),...oo(Object.assign({type:a.type,rules:[{nodeNames:"OL"}]},null===(n=null===e||void 0===e?void 0:e.ol)||void 0===n?void 0:n.deserialize)),...oo(Object.assign({type:o.type,rules:[{nodeNames:"LI"}]},null===(r=null===e||void 0===e?void 0:e.li)||void 0===r?void 0:r.deserialize))]}},ts=(e,{at:t=e.selection}={},n)=>{const{li:r}=Po(n,pa);if(t&&$o(e,{at:t,match:{type:r.type}})){const n=In(e,t);if(!n)return;const[,o]=n,i=zn(e,{at:t,match:{type:r.type}})||In(e,o);if(!i)return;const[a,s]=i;if(a.type!==r.type)return;const c=In(e,s);if(!c)return;return{list:c,listItem:i}}},ns=(e,{list:t,listItem:n},r)=>{const{li:i}=Po(r,pa),[a,s]=t,[,c]=n,l=In(e,s);if(!l)return;const[u,d]=l;return u.type===i.type?(o.ML.withoutNormalizing(e,(()=>{const t=o.y$.next(d);o.YR.moveNodes(e,{at:c,to:t});const n=c[c.length-1],r=[...c],i=t.concat(1);let l=!1,u=0;a.children.forEach(((t,s)=>{if(n<s){l||(l=!0,o.YR.insertNodes(e,{type:a.type,children:[]},{at:i})),r[r.length-1]=n;const t=i.concat(u);u++,o.YR.moveNodes(e,{at:r,to:t})}})),n||o.YR.removeNodes(e,{at:s})})),!0):void 0},rs=e=>(t,n)=>{let r=!1;if("Tab"===t.key){const i=ts(n,{},e);if(!i)return;const{list:a,listItem:s}=i,[,c]=s;t.preventDefault();t.shiftKey&&(r=ns(n,{list:a,listItem:s},e),r&&t.preventDefault());!t.shiftKey&&!Xr(c)&&((e,{list:t,listItem:n},r)=>{const[i]=t,[,a]=n,s=o.ML.node(e,o.y$.previous(a));if(s){const[t,n]=s,c=t.children.find((e=>Mn(e,{type:Xa(r)}))),l=n.concat(c?[1,c.children.length]:[1]);c||o.YR.wrapNodes(e,{type:i.type,children:[]},{at:a}),o.YR.moveNodes(e,{at:a,to:l})}})(n,{list:a,listItem:s},e)}},os=e=>{const{ul:t,ol:n,li:r}=Po(e,pa);return Ko([t,n,r])},is=e=>({renderElement:os(e),deserialize:es(e),onKeyDown:rs(e)}),as=(e,t,n,r)=>{const{li:i}=Po(r,pa),a=zn(e,{at:t,match:{type:Xa(r)}});if(!a)return;const[s,c]=a;if(!n||!o.y$.equals(c,n)){if(s.children.length<2){const t=zn(e,{at:c,match:{type:i.type}});if(t)return as(e,t[1],n,r)||c}return t}},ss=(e,t)=>e.children.some((e=>Mn(e,{type:Xa(t)}))),cs=(e,t)=>{const{li:n}=Po(t,pa),{selection:r}=e;if(!r||Hr(r))return!1;return!!((e,t={})=>{var{at:n}=t,r=eo(t,["at"]);if(n||(n=e.selection),!n)return!1;const[i,a]=o.e6.edges(n),s=Pn(e,Object.assign({at:i},r)),c=o.ML.above(e,Object.assign({at:a},r));return s&&c&&!o.y$.equals(s[1],c[1])})(e)&&$o(e,{match:{type:n.type}})},ls=(e,t)=>{let n=!1;return o.ML.withoutNormalizing(e,(()=>{const{li:r}=Po(t,pa);if(!cs(e,t))return;const i=o.ML.end(e,e.selection),a=zn(e,{at:i,match:{type:r.type}}),s=a&&!ss(a[0])?o.ML.pathRef(e,a[1]):void 0;si(e,{moveNode:(t,{at:n})=>{if(!e.selection)return;const[,r]=o.ML.node(e,n),i=Pn(e,{at:o.e6.start(e.selection)});if(!i)return;const[a,s]=i;li(e,{at:r,to:s.concat(a.children.length)})},removeEmptyAncestor:()=>{}});const c=o.ML.start(e,e.selection),l=zn(e,{at:c,match:{type:r.type}});if(s){const r=s.unref(),i=l&&In(e,l[1]),a=as(e,r,null===i||void 0===i?void 0:i[1],t);a&&o.YR.removeNodes(e,{at:a}),n=!0}})),n},us=(e,t)=>{const{p:n,li:r}=Po(t,pa);if(e.selection){const t=zn(e,{match:{type:n.type}});if(!t)return;const[,i]=t,a=In(e,i);if(!a)return;const[s,c]=a;if(s.type!==r.type)return;o.e6.isCollapsed(e.selection)||o.YR.delete(e);const l=o.ML.isStart(e,e.selection.focus,i),u=(e=>{if(!e.selection)return!1;const t=Pn(e);if(!t)return!1;const n=e.selection.focus,r=In(e,e.selection);if(!r)return!1;const[,i]=r;if(!o.ML.isEnd(e,n,i))return!1;const a=((e,t)=>{const[n,r]=e,o=t[r.length],i=[];if(o+1<n.children.length)for(let a=o+1;a<n.children.length;a++)i.push(n.children[a]);return i})(t,n.path);if(!a.length)return o.ML.isEnd(e,n,t[1]);for(const o of a)if(o.text)return!1;return!0})(e),d=o.y$.next(i),p=o.y$.next(c);if(l)return o.YR.insertNodes(e,{type:r.type,children:[{type:n.type,children:[{text:""}]}]},{at:c}),!0;if(u){const t=o.ML.marks(e)||{};o.YR.insertNodes(e,{type:r.type,children:[{type:n.type,children:[Object.assign({text:""},t)]}]},{at:p}),o.YR.select(e,p)}else o.ML.withoutNormalizing(e,(()=>{o.YR.splitNodes(e),o.YR.wrapNodes(e,{type:r.type,children:[]},{at:d}),o.YR.moveNodes(e,{at:d,to:p}),o.YR.select(e,p),o.YR.collapse(e,{edge:"start"})}));return s.children.length>1&&o.YR.moveNodes(e,{at:d,to:p.concat(1)}),!0}},ds=(e,{list:t,listItem:n},r)=>{const[i,a]=t,[s,c]=n;return!!(!((e,t,n)=>{const{li:r}=Po(n,pa),[i]=o.ML.parent(e,t);return i.type===r.type})(e,a,r)&&i.children.length<=1&&ss(s)&&Xr(c))&&(li(e,{at:[s,c],to:o.y$.next(a)}),o.YR.removeNodes(e,{at:a}),!0)},ps=(e,{list:t,listItem:n},r)=>{const[i,a]=n;if(!ss(i,r))return!1;if(Qr(e.selection))return!1;const s=o.ML.pathRef(e,a),c=(e=>{if(0===e.length)return;const t=e[e.length-1];return t<=0?void 0:e.slice(0,-1).concat(t-1)})(a);if(c){const[t]=o.ML.node(e,c);((e,{fromListItem:t,toListItem:n,start:r},i)=>{const[,a]=t,[,s]=n,c=Sn(e,{at:a,match:{type:Xa(i)}});if(!c)return 0;const[,l]=c,u=Sn(e,{at:s,match:{type:Xa(i)}});let d;if(u)if(r){const[,e]=u;d=e.concat([0])}else d=o.y$.next(An(u));else{const t=In(e,a);if(!t)return 0;const[n]=t,r=n.type,i=s.concat([1]);o.YR.insertNodes(e,{type:r,children:[]},{at:i}),d=i.concat([0])}const p=li(e,{at:l,to:d});o.YR.delete(e,{at:l})})(e,{fromListItem:n,toListItem:[t,c]},r),o.YR.select(e,o.ML.end(e,c.concat([0])))}else((e,{fromListItem:t,toList:n,start:r},i)=>{const a=Sn(e,{at:t[1],match:{type:Xa(i)}});if(!a)return 0;const[,s]=a,c=An(n),l=li(e,{at:s,to:r?n[1].concat([0]):o.y$.next(c)});o.YR.delete(e,{at:s})})(e,{fromListItem:n,toList:t},r);const l=s.unref();return l&&o.YR.removeNodes(e,{at:l}),!0},fs=({rules:e})=>(t,n)=>{let r;return n.selection&&Hr(n.selection)&&e.forEach((({types:e,defaultType:a,hotkey:s,predicate:c,onReset:l})=>{(!t||s&&(0,i.ZP)(s,t))&&c(n)&&$o(n,{match:{type:e}})&&(null===t||void 0===t||t.preventDefault(),o.YR.setNodes(n,{type:a}),null===l||void 0===l||l(n),r=!0)})),r},vs=(e={})=>{var{validLiChildrenTypes:t}=e,n=eo(e,["validLiChildrenTypes"]);return e=>{const{p:r,li:i}=Po(n,pa),{insertBreak:a,deleteBackward:s,deleteFragment:c}=e,l={types:[i.type],defaultType:r.type,onReset:e=>Ga(e,n)};return e.insertBreak=()=>{if(!e.selection)return;const t=ts(e,{},n);let s;if(t){const{list:a,listItem:c}=t,[l,u]=c,d=e.selection.focus;if(ss(l)){if(o.ML.isEnd(e,d,u))return o.YR.insertNodes(e,{type:i.type,children:[{type:r.type,children:[{text:""}]}]},{at:o.y$.next(u),select:!0});if(o.ML.isStart(e,d,u))return o.YR.insertNodes(e,{type:i.type,children:[{type:r.type,children:[{text:""}]}]},{at:u})}if(Zr(e)&&(s=ns(e,{list:a,listItem:c},n),s))return}if(!fs({rules:[Object.assign(Object.assign({},l),{predicate:()=>!s&&Zr(e)})]})(null,e)){if(!s){if(us(e,n))return}a()}},e.deleteBackward=t=>{const r=ts(e,{},n);let i;if(r){const{list:a,listItem:c}=r,[l]=c;if(no(e)&&(o.ML.withoutNormalizing(e,(()=>{i=ds(e,{list:a,listItem:c},n),i||(i=ps(e,{list:a,listItem:c},n),i||(i=ns(e,{list:a,listItem:c},n)))})),i))return;if(ss(l)&&Hr(e.selection))return s(t)}fs({rules:[Object.assign(Object.assign({},l),{predicate:()=>!i&&no(e)})]})(null,e)||s(t)},e.deleteFragment=()=>{ls(e,n)||c()},e.normalizeNode=Ja(e,{validLiChildrenTypes:t},n),e}},hs=(0,c.y)(),ms=(0,l.z)((({attributes:e,children:t,element:n,prefix:r,className:o,styles:i,htmlAttributes:s,as:c="span",onClick:l,renderLabel:u=(e=>e.value)})=>{const p=(0,d.vt)(),f=(0,d.UE)(),v=hs(i,{className:o,selected:p,focused:f});return(0,a.createElement)(c,Object.assign({},e,{"data-slate-value":n.value,className:v.root,contentEditable:!1,onClick:io(l,n)},s),r,u(n),t)}),(({className:e,focused:t,selected:n})=>({root:[{padding:"3px 3px 2px",margin:"0 1px",verticalAlign:"baseline",display:"inline-block",borderRadius:"4px",backgroundColor:"#eee",fontSize:"0.9em",boxShadow:n&&t?"0 0 0 2px #B4D5FF":"none"},e]})),void 0,{scope:"MentionElement"}),ys="slate-MentionSelect",gs="slate-MentionSelect-mentionItem",bs="slate-MentionSelect-mentionItemSelected",js=(0,c.y)(),ks=((0,l.z)((e=>{var{className:t,styles:n,at:r,options:o,valueIndex:i,onClickMention:s,renderLabel:c=(e=>e.value)}=e,l=eo(e,["className","styles","at","options","valueIndex","onClickMention","renderLabel"]);const u=js(n,{className:t}),p=(0,a.useRef)(),f=(0,d.ui)();return(0,a.useEffect)((()=>{if(r&&o.length>0){const e=p.current,t=d.F3.toDOMRange(f,r).getBoundingClientRect();e&&(e.style.top=`${t.top+window.pageYOffset+24}px`,e.style.left=`${t.left+window.pageXOffset}px`)}}),[o.length,f,r]),r&&o.length?(0,a.createElement)(pi,null,(0,a.createElement)("div",Object.assign({ref:p,className:u.root},l),o.map(((e,t)=>(0,a.createElement)("div",{key:`${t}${e.value}`,className:t===i?u.mentionItemSelected:u.mentionItem,onMouseDown:Io(s,f,e)},c(e)))))):null}),(({className:e}={})=>{const t=[gs,{padding:"1px 3px",borderRadius:"3px",background:"transparent",cursor:"pointer"}],n=[bs,...t,{background:"#B4D5FF"}];return{root:[ys,{top:"-9999px",left:"-9999px",position:"absolute",zIndex:1,padding:"3px",background:"white",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,.2)"},e],mentionItem:t,mentionItemSelected:n}}),void 0,{scope:"MentionSelect"}),{mention:{component:ms,type:"mention",rootProps:{className:"slate-mention",prefix:"@"}}}),xs=e=>{var t;const{mention:n}=Po(e,ks);return{element:ro(Object.assign({type:n.type,node:e=>({type:n.type,value:e.getAttribute("data-slate-value")}),rules:[{className:n.rootProps.className}]},null===(t=null===e||void 0===e?void 0:e.mention)||void 0===t?void 0:t.deserialize))}},Ns=e=>{const{mention:t}=Po(e,ks);return qo(t)},Os=e=>{const{mention:t}=Po(e,ks);return{renderElement:Ns(e),deserialize:xs(e),inlineTypes:[t.type],voidTypes:[t.type]}},_s=(0,c.y)(),ws={table:{component:(0,l.z)((({attributes:e,children:t,className:n,styles:r,htmlAttributes:o})=>{const i=_s(r,{className:n});return(0,a.createElement)("table",Object.assign({},e,{className:i.root},o),(0,a.createElement)("tbody",null,t))}),(({className:e})=>({root:[{margin:"10px 0",borderCollapse:"collapse",width:"100%"},e]})),void 0,{scope:"TableElement"}),type:"table",rootProps:{className:"slate-table",as:"table"}},tr:{component:mi,type:"tr",rootProps:{className:"slate-tr",as:"tr"}},th:{component:mi,type:"th",rootProps:{className:"slate-th",as:"th",styles:{root:{backgroundColor:"rgb(244, 245, 247)",border:"1px solid rgb(193, 199, 208)",padding:"8px",minWidth:"48px",textAlign:"left",selectors:{"> *":{margin:0}}}}},nodeToProps:({element:e})=>{var t,n;return{colSpan:null===(t=null===e||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.colspan,rowSpan:null===(n=null===e||void 0===e?void 0:e.attributes)||void 0===n?void 0:n.rowspan}}},td:{component:mi,type:"td",rootProps:{className:"slate-td",as:"td",styles:{root:{backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(193, 199, 208)",padding:"8px",minWidth:"48px",selectors:{"> *":{margin:0}}}}},nodeToProps:({element:e})=>{var t,n;return{colSpan:null===(t=null===e||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.colspan,rowSpan:null===(n=null===e||void 0===e?void 0:e.attributes)||void 0===n?void 0:n.rowspan}}}},Ls=e=>{var t,n,r,o;const{table:i,td:a,th:s,tr:c}=Po(e,ws);return{element:[...oo(Object.assign({type:i.type,rules:[{nodeNames:"TABLE"}]},null===(t=null===e||void 0===e?void 0:e.table)||void 0===t?void 0:t.deserialize)),...oo(Object.assign({type:c.type,rules:[{nodeNames:"TR"}]},null===(n=null===e||void 0===e?void 0:e.tr)||void 0===n?void 0:n.deserialize)),...oo(Object.assign({type:a.type,attributes:["rowspan","colspan"],rules:[{nodeNames:"TD"}]},null===(r=null===e||void 0===e?void 0:e.td)||void 0===r?void 0:r.deserialize)),...oo(Object.assign({type:s.type,attributes:["rowspan","colspan"],rules:[{nodeNames:"TH"}]},null===(o=null===e||void 0===e?void 0:e.th)||void 0===o?void 0:o.deserialize))]}};function Es(e,t,n,r){try{return o.ML.node(e,o.y$.next(n))}catch(i){const[,t]=r;return function(e,t){var n;try{const r=o.ML.node(e,o.y$.next(t)),[i,a]=r,s=null===(n=null===i||void 0===i?void 0:i.children)||void 0===n?void 0:n[0],c=a.concat(0);if(s&&c)return o.ML.node(e,c)}catch(i){}}(e,t)}}function Ms(e,t,n,r){try{return o.ML.node(e,o.y$.previous(n))}catch(i){const[,t]=r;return function(e,t){var n;try{const r=o.ML.node(e,o.y$.previous(t)),[i,a]=r,s=null===(n=null===i||void 0===i?void 0:i.children)||void 0===n?void 0:n[i.children.length-1],c=a.concat(i.children.length-1);if(s&&c)return o.ML.node(e,c)}catch(i){}}(e,t)}}const Rs="Tab",Ss=e=>(t,n)=>{if(t.key===Rs){t.preventDefault();const r=((e,{at:t=e.selection}={},n)=>{const{td:r,tr:o,table:i}=Po(n,ws);if(t&&$o(e,{at:t,match:{type:r.type}})){const n=In(e,t);if(!n)return;const[,a]=n,s=zn(e,{at:t,match:{type:r.type}})||In(e,a);if(!s)return;const[c,l]=s;if(c.type!==r.type)return;const u=In(e,l);if(!u)return;const[d,p]=u;if(d.type!==o.type)return;const f=In(e,p);if(!i)return;return{tableElement:f,tableRow:u,tableCell:s}}})(n,{},e);if(!r)return;const{tableRow:i,tableCell:a}=r,[,s]=a,c=t.shiftKey,l=!t.shiftKey;if(c){const e=Ms(n,0,s,i);if(e){const[,t]=e;o.YR.select(n,t)}}else if(l){const e=Es(n,0,s,i);if(e){const[,t]=e;o.YR.select(n,t)}}}},Ts=e=>{const{table:t,td:n,th:r,tr:o}=Po(e,ws);return Ko([t,r,o,n])},zs=e=>({renderElement:Ts(e),deserialize:Ls(e),onKeyDown:Ss(e)}),Ps=e=>t=>{const{td:n,th:r}=Po(e,ws),i=e=>e.type===n.type||e.type===r.type,{deleteBackward:a,deleteForward:s,deleteFragment:c,insertText:l}=t,u=(e,n,r)=>a=>{const{selection:s}=t;if(Hr(s)){const[e]=o.ML.nodes(t,{match:i});if(e){const[,r]=e,i=n(t,r);if(s&&o.E9.equals(s.anchor,i))return}else{const e=r(t,s,{unit:a}),[n]=o.ML.nodes(t,{match:i,at:e});if(n)return}}e(a)};return t.deleteFragment=()=>{const{selection:e}=t,[n]=o.ML.nodes(t,{match:i,at:null===e||void 0===e?void 0:e.anchor.path}),[r]=o.ML.nodes(t,{match:i,at:null===e||void 0===e?void 0:e.focus.path});if(!n&&!r||(null===n||void 0===n?void 0:n[0])===(null===r||void 0===r?void 0:r[0]))c();else{const e=o.ML.nodes(t,{match:i});for(const[,n]of e)for(const[,e]of o.NB.children(t,n))o.YR.removeNodes(t,{at:e});o.YR.collapse(t)}},t.insertText=e=>{const{selection:n}=t,[r]=o.ML.nodes(t,{match:i,at:null===n||void 0===n?void 0:n.anchor.path}),[a]=o.ML.nodes(t,{match:i,at:null===n||void 0===n?void 0:n.focus.path});if(!Hr(n)&&(r||a)&&(null===r||void 0===r?void 0:r[0])!==(null===a||void 0===a?void 0:a[0])){const[n]=o.ML.nodes(t,{match:i});if(n)return o.YR.collapse(t,{edge:"end"}),void l(e)}l(e)},t.deleteBackward=u(a,o.ML.start,o.ML.before),t.deleteForward=u(s,o.ML.end,o.ML.after),t},As=e=>{var{className:t,url:n,onChange:r}=e,o=eo(e,["className","url","onChange"]);const[i,s]=(0,a.useState)(n);return(0,a.createElement)("input",Object.assign({className:t,value:i,onClick:e=>e.stopPropagation(),onChange:e=>{const t=e.target.value;s(t),r(t)}},o))},$s=(0,c.y)(),Bs={media_embed:{component:(0,l.z)((({attributes:e,children:t,element:n,className:r,styles:i,htmlAttributes:s})=>{const c=$s(i,{className:r}),l=(0,d.jE)(),{url:u}=n;return(0,a.createElement)("div",Object.assign({},e,{className:c.root}),(0,a.createElement)("div",{contentEditable:!1},(0,a.createElement)("div",{className:c.iframeWrapper},(0,a.createElement)("iframe",Object.assign({className:c.iframe,title:"embed",src:`${u}?title=0&byline=0&portrait=0`,frameBorder:"0"},s))),(0,a.createElement)(As,{"data-testid":"MediaEmbedUrlInput",className:c.input,url:u,onChange:e=>{const t=d.F3.findPath(l,n);o.YR.setNodes(l,{url:e},{at:t})}})),t)}),(({className:e})=>({root:[{position:"relative"},e],iframeWrapper:{padding:"75% 0 0 0",position:"relative"},iframe:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},input:{fontSize:"0.85em",width:"100%",padding:"0.5em",border:"2px solid #ddd",background:"#fafafa",marginTop:"5px"}})),void 0,{scope:"MediaEmbedElement"}),type:"media_embed",rootProps:{className:"slate-media-embed"}}},Ds=e=>{var t;const{media_embed:n}=Po(e,Bs);return{element:ro(Object.assign({type:n.type,node:e=>{let t=e.getAttribute("src");if(t)return[t]=t.split("?"),{type:n.type,url:t}},rules:[{nodeNames:"IFRAME"},{className:n.rootProps.className}]},null===(t=null===e||void 0===e?void 0:e.media_embed)||void 0===t?void 0:t.deserialize))}},Cs=e=>{const{media_embed:t}=Po(e,Bs);return qo(t)},Is=e=>{const{media_embed:t}=Po(e,Bs);return{renderElement:Cs(e),deserialize:Ds(e),voidTypes:[t.type]}},Ys="align_left",Fs="align_center",Ws="align_right",qs="align_justify",Ks={align_left:{component:mi,type:Ys,rootProps:{className:"slate-align-left",styles:{root:{textAlign:"left"}}}},align_center:{component:mi,type:Fs,rootProps:{className:"slate-align-center",styles:{root:{textAlign:"center"}}}},align_right:{component:mi,type:Ws,rootProps:{className:"slate-align-right",styles:{root:{textAlign:"right"}}}},align_justify:{component:mi,type:qs,rootProps:{className:"slate-align-justify",styles:{root:{textAlign:"justify"}}}}},Us=(e,t,n,{preFormat:r,format:i})=>{o.YR.delete(e,{at:n}),null===r||void 0===r||r(e),i?i(e):o.YR.setNodes(e,{type:t},{match:t=>o.ML.isBlock(e,t)})},Vs=(e,{type:t,between:n,markup:r,ignoreTrim:i})=>{const a=e.selection,s=n?n[0]:r,c=n?n[1]:"";let l=a.anchor;if(c&&(l=Wr(e,a,{matchString:c}),!l))return!1;const u=Wr(e,l,{matchString:s,skipInvalid:!0,afterMatch:!0});if(!u)return!1;const d={anchor:u,focus:l};if(!i){const t=Vr(e,d);if(t.trim()!==t)return!1}c&&(l=Wr(e,a,{matchString:c}),o.YR.delete(e,{at:{anchor:l,focus:a.anchor}})),o.YR.select(e,d),e.addMark(t,!0),o.YR.collapse(e,{edge:"end"}),e.removeMark(t,!1);const p=Wr(e,a,{matchString:s,skipInvalid:!0});return o.YR.delete(e,{at:{anchor:p,focus:u}}),!0},Zs=({rules:e})=>t=>{const{insertText:n}=t;return t.insertText=r=>{if(!Hr(t.selection))return n(r);for(let i of e){const{query:e}=i,a=eo(i,["query"]),{trigger:s=" ",mode:c="block",allowSameTypeAbove:l=!1,triggerAtBlockStart:u=!0,type:d,markup:p,preFormat:f,format:v,between:h,ignoreTrim:m,insertTrigger:y}=a;if(e&&!e(t,a))continue;if(!x(s).includes(r))continue;const g=()=>y&&n(r);if("block"===c){const e=x(p);let n;if(u){n=Ur(t);if($o(t,{at:n,match:e=>o.ML.isVoid(t,e)}))continue;const r=Vr(t,n);if(!e.includes(r))continue}else if(n=Kr(t,t.selection,{matchString:p}),!n)continue;if(!l){if($o(t,{match:{type:d}}))continue}return Us(t,d,n,{preFormat:f,format:v}),g()}if("inline"===c&&Vs(t,{type:d,between:h,ignoreTrim:m,markup:Array.isArray(p)?p[0]:p}))return g()}n(r)},t},Hs=(e,{start:t,end:n})=>{let r=!1,o=!1,i=!1;return(t||n)&&(r=!0,t&&no(e)&&(o=!0,i=!0),n&&(e=>{var t,n;const r=null===(t=Pn(e))||void 0===t?void 0:t[1];return r&&Gr(e,null===(n=e.selection)||void 0===n?void 0:n.focus,r)})(e)&&(o=!0),o&&Qr(e.selection)&&e.deleteFragment()),{queryEdge:r,isEdge:o,isStart:i}},Gs=({rules:e=[{hotkey:"mod+enter"},{hotkey:"mod+shift+enter",before:!0}]}={})=>(t,n)=>{const r=Pn(n);r&&e.forEach((({hotkey:e,query:a={},level:s=1,before:c,defaultType:l=Bo})=>{if((0,i.ZP)(e,t)&&qr(r,a)){if(!n.selection)return;const{queryEdge:e,isEdge:r,isStart:i}=Hs(n,a);if(i&&(c=!0),e&&!r)return;t.preventDefault();const u=o.ML.path(n,n.selection);let d;d=c?u.slice(0,s+1):o.y$.next(u.slice(0,s+1)),o.YR.insertNodes(n,{type:l,children:[{text:""}]},{at:d,select:!i})}}))},Qs=(e={})=>({onKeyDown:Gs(e)}),Xs=e=>({onKeyDown:fs(e)}),Js=({rules:e=[{hotkey:"shift+enter"}]}={})=>(t,n)=>{const r=Pn(n);r&&e.forEach((({hotkey:e,query:o})=>{(0,i.ZP)(e,t)&&qr(r,o)&&(t.preventDefault(),n.insertText("\n"))}))},ec=(e={})=>({onKeyDown:Js(e)}),tc="bold",nc={bold:{component:gi,type:tc,hotkey:"mod+b",rootProps:{className:"slate-bold",as:"strong"}}},rc=e=>{var t;const{bold:n}=Po(e,nc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["STRONG"]},{style:{fontWeight:["600","700","bold"]}}]},null===(t=null===e||void 0===e?void 0:e.bold)||void 0===t?void 0:t.deserialize))}},oc=e=>Uo({key:"bold",defaultOptions:nc,options:e}),ic=e=>({renderLeaf:oc(e),deserialize:rc(e),onKeyDown:Ao({key:"bold",defaultOptions:nc,options:e})}),ac="code",sc={code:{component:gi,type:ac,hotkey:"mod+e",rootProps:{className:"slate-code",as:"code",styles:{root:{whiteSpace:"pre-wrap",fontSize:"85%",fontFamily:'"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;',backgroundColor:"rgba(135,131,120,0.15)",borderRadius:"3px",padding:"0.2em 0.4em",lineHeight:"normal"}}}}},cc=e=>{var t;const{code:n}=Po(e,sc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["CODE"]},{style:{wordWrap:"break-word"}}]},null===(t=null===e||void 0===e?void 0:e.code)||void 0===t?void 0:t.deserialize))}},lc=e=>Uo({key:"code",defaultOptions:sc,options:e}),uc=e=>({renderLeaf:lc(e),deserialize:cc(e),onKeyDown:Ao({key:"code",defaultOptions:sc,options:e})}),dc="italic",pc={italic:{component:gi,type:dc,hotkey:"mod+i",rootProps:{className:"slate-italic",as:"em"}}},fc=e=>{var t;const{italic:n}=Po(e,pc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["EM","I"]},{style:{fontStyle:"italic"}}]},null===(t=null===e||void 0===e?void 0:e.italic)||void 0===t?void 0:t.deserialize))}},vc=e=>Uo({key:"italic",defaultOptions:pc,options:e}),hc=e=>({renderLeaf:vc(e),deserialize:fc(e),onKeyDown:Ao({key:"italic",defaultOptions:pc,options:e})}),mc="strikethrough",yc={strikethrough:{component:gi,type:mc,hotkey:"mod+shift+s",rootProps:{className:"slate-strikethrough",as:"s"}}},gc=e=>{var t;const{strikethrough:n}=Po(e,yc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["S","DEL","STRIKE"]},{style:{textDecoration:"line-through"}}]},null===(t=null===e||void 0===e?void 0:e.strikethrough)||void 0===t?void 0:t.deserialize))}},bc=e=>Uo({key:"strikethrough",defaultOptions:yc,options:e}),jc=e=>({renderLeaf:bc(e),deserialize:gc(e),onKeyDown:Ao({key:"strikethrough",defaultOptions:yc,options:e})}),kc="superscript",xc="subscript",Nc={subscript:{component:gi,type:xc,hotkey:"mod+,",clear:kc,rootProps:{className:"slate-subscript",as:"sub"}},superscript:{component:gi,type:kc,hotkey:"mod+.",clear:xc,rootProps:{className:"slate-superscript",as:"sup"}}},Oc=e=>{var t;const{subscript:n}=Po(e,Nc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["SUB"]},{style:{verticalAlign:"sub"}}]},null===(t=null===e||void 0===e?void 0:e.subscript)||void 0===t?void 0:t.deserialize))}},_c=e=>Uo({key:"subscript",defaultOptions:Nc,options:e}),wc=e=>({renderLeaf:_c(e),deserialize:Oc(e),onKeyDown:Ao({key:"subscript",defaultOptions:Nc,options:e})}),Lc=e=>{var t;const{superscript:n}=Po(e,Nc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["SUP"]},{style:{verticalAlign:"super"}}]},null===(t=null===e||void 0===e?void 0:e.superscript)||void 0===t?void 0:t.deserialize))}},Ec=e=>Uo({key:"superscript",defaultOptions:Nc,options:e}),Mc=e=>({renderLeaf:Ec(e),deserialize:Lc(e),onKeyDown:Ao({key:"superscript",defaultOptions:Nc,options:e})}),Rc="underline",Sc={underline:{component:gi,type:Rc,hotkey:"mod+u",rootProps:{className:"slate-underline",as:"u"}}},Tc=e=>{var t;const{underline:n}=Po(e,Sc);return{leaf:ao(Object.assign({type:n.type,rules:[{nodeNames:["U"]},{style:{textDecoration:"underline"}}]},null===(t=null===e||void 0===e?void 0:e.underline)||void 0===t?void 0:t.deserialize))}},zc=e=>Uo({key:"underline",defaultOptions:Sc,options:e}),Pc=e=>({renderLeaf:zc(e),deserialize:Tc(e),onKeyDown:Ao({key:"underline",defaultOptions:Sc,options:e})}),Ac={highlight:{component:gi,type:"highlight",hotkey:"mod+shift+h",rootProps:{className:"slate-highlight",as:"mark",styles:{root:{backgroundColor:"#FEF3B7"}}}}},$c={kbd:{component:gi,type:"kbd",rootProps:{className:"slate-kbd",as:"kbd",styles:{root:{whiteSpace:"pre-wrap",fontSize:"75%",fontFamily:'"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;',backgroundColor:"white",border:"1px solid black",borderRadius:"3px",padding:"0.2em 0.4em",marginRight:"0.2em",lineHeight:"normal",boxShadow:"2px 2px 3px 0px rgba(0,0,0,0.75)"}}}}},Bc=()=>e=>{const t=e;return t.removeMark=(t,n=!0)=>{const{selection:r}=e;if(r)if(o.e6.isExpanded(r))o.YR.unsetNodes(e,t,{match:o.xv.isText,split:!0});else{const r=Object.assign({},o.ML.marks(e)||{});delete r[t],e.marks=r,n&&e.onChange()}},t},Dc={search_highlight:{type:"search_highlight",rootProps:{as:"span",className:"slate-search-highlight",styles:{root:{backgroundColor:"#fff59d"}}}}},Cc=e=>([t,n])=>{const{search_highlight:r,search:i}=Po(e,Dc),a=[];if(i&&o.xv.isText(t)){const{text:e}=t,o=e.split(i);let s=0;o.forEach(((e,t)=>{0!==t&&a.push({anchor:{path:n,offset:s-i.length},focus:{path:n,offset:s},[r.type]:!0}),s=s+e.length+i.length}))}return a}}}]);