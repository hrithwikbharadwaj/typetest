(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9579],{93217:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var i=n(87462),r=n(67294),o=n(31322),l=r.forwardRef((function(e,t){return r.createElement(o.r,(0,i.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{d:"M8.465 11.293c1.133-1.133 3.109-1.133 4.242 0l.707.707 1.414-1.414-.707-.707c-.943-.944-2.199-1.465-3.535-1.465s-2.592.521-3.535 1.465L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l2.122-2.121z"}),r.createElement("path",{d:"m12 4.929-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121c-1.133 1.133-3.109 1.133-4.242 0L10.586 12l-1.414 1.414.707.707c.943.944 2.199 1.465 3.535 1.465s2.592-.521 3.535-1.465L19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0z"}))}));l.displayName="Link"},2676:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var i=n(92809),r=n(67294),o=n(94184),l=n.n(o),a=n(78872),c=n(87462),u=n(31322),d=r.forwardRef((function(e,t){return r.createElement(u.r,(0,c.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 50 50"},e,{ref:t}),r.createElement("path",{d:"M39 38H11c-1.7 0-3-1.3-3-3V15c0-1.7 1.3-3 3-3h28c1.7 0 3 1.3 3 3v20c0 1.7-1.3 3-3 3zM11 14c-.6 0-1 .4-1 1v20c0 .6.4 1 1 1h28c.6 0 1-.4 1-1V15c0-.6-.4-1-1-1H11z"}),r.createElement("path",{d:"M30 24c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM35.3 37.7L19 22.4 9.7 31l-1.4-1.4 10.7-10 17.7 16.7z"}),r.createElement("path",{d:"M40.4 32.7L35 28.3 30.5 32l-1.3-1.6 5.8-4.7 6.6 5.4z"}))}));d.displayName="Image";var s=n(1706),h=n(87410),v=n(32938),f=n(18446),m=n.n(f),g=n(93217),w=n(7884),_=n.n(w),p=n(88053),E=n(20905),I=n(96382),b=n(67779),T=n(75544),H=function(e,t){var n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),i=t.top,r=t.bottom,o=n-10;return r>o?Math.max(i,70):Math.min(r,o-e.offsetHeight)},y=n(8677),W=n(20762),O=n(88200),x=n(89388),A=n(64853),N=n(89447),M=n(85893);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t,n,o=e.path,c=e.element,u=e.children,f=e.attributes,w=(0,r.useState)(null),z=w[0],S=w[1],D=(0,r.useState)(null),L=D[0],R=D[1],j=(0,r.useState)(null),C=j[0],P=j[1],k=(0,r.useState)(null),B=k[0],Z=k[1],G=(0,r.useState)(null),X=G[0],U=G[1],F=(0,r.useState)(c[E.Q_.ASPECT_RATIO]||1),J=F[0],V=F[1],Y=(0,r.useState)(!1),K=Y[0],q=Y[1],$=(0,r.useState)(!1),ee=$[0],te=$[1],ne=(0,a.jE)(),ie=(0,a.GQ)(),re=(0,r.useContext)(y.lm),oe=ie||!re?0:I.M,le=(0,r.useState)(null),ae=le[0],ce=le[1],ue=(0,r.useContext)(A.hP),de=(0,r.useContext)(A.LI),se=(0,(0,r.useContext)(N.Z).getURL)(c),he=function(e){e||a.F3.focus(ne),te(e)};(0,r.useEffect)((function(){var e;if(o)try{e=h.NB.parent(ne,o),Z(e)}catch(t){Z(null)}}),[o]);var ve=(0,r.useRef)(null),fe=function(e){ve.current=e,q(e)},me=(0,r.useRef)(null),ge=function(e){if(me.current){var t=me.current.getElementsByTagName("img")[0];t&&(t.setAttribute(E.OJ.WIDTH,e.width),t.setAttribute(E.OJ.HEIGHT,e.height),t.setAttribute(E.OJ.ALIGN,c.align))}S(e)},we=(0,r.useRef)(null),_e=(0,r.useRef)(null);(0,r.useEffect)((function(){m()(o,de)&&c.url&&he(ue.openReplaceImage)}),[ue.openReplaceImage,de]),(0,r.useEffect)((function(){ee||ue.setopenReplaceImage(ee)}),[ee]),(0,r.useEffect)((function(){var e=me.current,t=_e.current;if(e&&t){var n=e.getBoundingClientRect();ee?t.style.top="".concat(null!==c&&void 0!==c&&c.url?H(t,n)-n.top:55,"px"):me.current&&(t.style.top="55px")}}),[ee,me.current,_e.current]);var pe=r.useRef(ae),Ee=function(e){if(pe.current=e,me.current){var t=me.current.getElementsByTagName("img")[0];t&&t.setAttribute(E.OJ.WIDTH_MAX,e)}ce(e)};function Ie(e){if(window&&window.innerWidth&&"100%"===pe.current){var t=window.innerWidth-10-oe;ge({width:t,height:e*t})}}function be(){var e=function(){var e=(0,v.DYv)(ne,{match:function(e){return e.id===(null===B||void 0===B?void 0:B.id)}});try{return h.NB.parent(ne,e[1])}catch(t){return null}}();me&&me.current&&P(((null===B||void 0===B?void 0:B.type)!==E.bF.COLUMN_ITEM||null!==e&&void 0!==e&&e.align&&"column_dynamic"!==(null===e||void 0===e?void 0:e.align))&&(null===B||void 0===B?void 0:B.type)!==E.bF.CONTAINER?1/0:me.current.parentNode.clientWidth)}function Te(){window&&window.innerWidth&&R(window.innerWidth-10-oe),be()}(0,r.useEffect)((function(){if(Ee(c[E.Q_.WIDTH_MAX]),"100%"===c[E.Q_.WIDTH_MAX]){var e=z||{};e.width=L,ge(e)}}),[c[E.Q_.WIDTH_MAX]]),(0,r.useEffect)((function(){var e=c[E.Q_.WIDTH]||(null===z||void 0===z?void 0:z.width),t=c[E.Q_.HEIGHT]||(null===z||void 0===z?void 0:z.height);e===(null===z||void 0===z?void 0:z.width)&&t===(null===z||void 0===z?void 0:z.height)||ge({width:e,height:t})}),[c[E.Q_.WIDTH],c[E.Q_.HEIGHT]]),(0,r.useEffect)((function(){(null===B||void 0===B?void 0:B.type)!==E.bF.COLUMN_ITEM&&(null===B||void 0===B?void 0:B.type)!==E.bF.CONTAINER||be()}),[ne.children,B]),(0,r.useEffect)((function(){return window?(window.addEventListener("resize",Te),z&&window.addEventListener("resize",(function(){return Ie(z.height/z.width)})),function(){window.removeEventListener("resize",Te)}):function(){return null}}),[c[E.Q_.WIDTH_MAX],B]),(0,r.useEffect)((function(){me&&me.current&&me.current.parentNode.clientWidth&&me.current.parentNode.clientWidth!==C&&be()}),[null===me||void 0===me||null===(t=me.current)||void 0===t||null===(n=t.parentNode)||void 0===n?void 0:n.clientWidth,B]),(0,r.useEffect)((function(){z&&Ie(z.height/z.width),Te(),be()}),[re,B]),(0,r.useEffect)((function(){if(window&&window.innerWidth){Te();var e=window.innerWidth-10-oe;e=Math.min(e,C),z&&U(z.height/z.width*e)}}),[z,B,C]);var He=function(e){if(p.Z.setBlockProperty(ne,E.Q_.ASPECT_RATIO,e,{at:o}),me.current){var t=me.current.getElementsByTagName("img")[0];t&&t.setAttribute(E.OJ.ASPECT_RATIO,e)}V(e)},ye=function(e,t){if(e||null==c[E.Q_.WIDTH]||null==c[E.Q_.HEIGHT]){var n=document.createElement("img");n.addEventListener("load",(function(t){var n=t.target,i=null===n||void 0===n?void 0:n.naturalWidth,r=null===n||void 0===n?void 0:n.naturalHeight,l=e&&c[E.Q_.WIDTH]?c[E.Q_.WIDTH]:Math.min(i,I.yA),a=r/i*l;ge({height:a+0,width:l}),p.Z.setBlockProperty(ne,E.Q_.WIDTH,l,{at:o}),p.Z.setBlockProperty(ne,E.Q_.HEIGHT,a+0,{at:o}),He(l/(a+0))})),n.addEventListener("error",(function(){null==c[E.Q_.WIDTH]&&null==c[E.Q_.HEIGHT]&&ge({height:100,width:100})})),n.src=e?t:c[E.Q_.URL]}else{var i,r=c[E.Q_.WIDTH],l=c[E.Q_.HEIGHT],a=Math.max((null===(i=window)||void 0===i?void 0:i.innerWidth)-oe,1);"100%"===c[E.Q_.WIDTH_MAX]&&(l=l/(r=a)*a),ge({width:r,height:l}),He(r/l)}};(0,r.useEffect)((function(){z||ye()}),[c]);var We={};W.F.ALIGN.types.includes(c.type)&&!O.RL.includes(c.type)&&(We=x.PR[c.align]||x.hf);var Oe=L&&C?Math.min(L,c[E.Q_.WIDTH],C):c[E.Q_.WIDTH],xe="auto";"100%"===c[E.Q_.WIDTH_MAX]?Oe=L&&C&&C!==1/0?Math.min(L,C):"100vw":xe=1/J*Oe;var Ae=(0,M.jsx)("div",{style:{display:c.url?"block":"none",userSelect:"none"},contentEditable:!1,id:"resizable-container-".concat(c.id),role:"none",children:c.url&&!ie?(0,M.jsx)(s.ResizableBox,{className:l()("resizable-container","resizable-container-border",_().resizableContainer,{"resizable-container-hover":K}),width:L?Math.min(L,null===z||void 0===z?void 0:z.width,C):0,height:Math.min((null===z||void 0===z?void 0:z.height)||500,X,1/J*C),handle:function(e,t){return(0,M.jsx)("div",{className:"custom-handle-wrapper custom-handle-".concat(e),contentEditable:!1,ref:t,children:(0,M.jsx)("div",{className:l()("custom-handle custom-handle-cursor-".concat(e),_().customHandle,(0,i.Z)({},_().customHandleShow,K))})})},handleSize:[8,8],lockAspectRatio:!0,maxConstraints:[Math.min(L,C),X],minConstraints:[10,J?1/J*10:10],onResizeStart:function(){return fe(!0)},onResizeStop:function(){var e,t=Math.max((null===(e=window)||void 0===e?void 0:e.innerWidth)-oe,1);p.Z.setBlockProperty(ne,E.Q_.WIDTH,null===z||void 0===z?void 0:z.width,{at:o}),p.Z.setBlockProperty(ne,E.Q_.HEIGHT,null===z||void 0===z?void 0:z.height,{at:o}),(null===z||void 0===z?void 0:z.width)/t>.95?p.Z.setBlockProperty(ne,E.Q_.WIDTH_MAX,"100%",{at:o}):(p.Z.setBlockProperty(ne,E.Q_.WIDTH_MAX,void 0,{at:o}),Ee(void 0)),fe(!1)},onResize:function(e,t){var n=t.size,i=t.handle,r="w"===i?2*((null===z||void 0===z?void 0:z.width)-n.width):(null===z||void 0===z?void 0:z.width)-n.width,o="w"===i?2*((null===z||void 0===z?void 0:z.height)-n.height):(null===z||void 0===z?void 0:z.height)-n.height,l={width:(null===z||void 0===z?void 0:z.width)-r,height:(null===z||void 0===z?void 0:z.height)-o};ge(l)},resizeHandles:["w","e","s","se","sw"],ref:we,children:(0,M.jsxs)(M.Fragment,{children:[c.href&&(0,M.jsx)("div",{contentEditable:"false",style:{userSelect:"none",WebkitUserSelect:"none"},children:(0,M.jsx)(g.r,{size:22,className:_().linkIcon})}),u]})},"resizable-container-".concat(c.id)):(0,M.jsx)("div",{contentEditable:!1,className:_().imageResizableContainer,style:{userSelect:"none",width:Oe,height:xe,cursor:null!==c&&void 0!==c&&c.href&&ie?"pointer":void 0},children:u})}),Ne=(0,i.Z)({},E.OJ.TYPE,E.bF.IMAGE);return(0,M.jsxs)("div",{"data-testid":null===f||void 0===f?void 0:f["data-testid"],className:_().container,ref:me,style:We,children:[!c.url&&!ie&&(0,M.jsx)("div",{style:{userSelect:"none",width:"100%"},contentEditable:!1,children:(0,M.jsx)(b.Z,{attributes:f,element:c,children:(0,M.jsxs)("div",{contentEditable:!1,style:{userSelect:"none",maxWidth:"100%",padding:"0 20px"},className:l()(_().addImage,"select-image-".concat(c.id)),onMouseDown:function(){return he((function(e){return!e}))},role:"button",tabIndex:0,children:[(0,M.jsx)(d,{size:28,className:_().icon}),"Add an image"]})})}),null!==c&&void 0!==c&&c.href&&ie?(0,M.jsx)("a",Q(Q({href:se},Ne),{},{target:null!==c&&void 0!==c&&c[E.Q_.OPEN_IN_NEW_TAB]?"_blank":void 0,rel:"noreferrer",children:Ae})):Ae,ee&&!ie&&(0,M.jsx)("div",{ref:_e,className:l()(_().imageOptions),contentEditable:!1,style:{userSelect:"none",width:ee?500:0},children:(0,M.jsx)(T.default,{uploadOptions:[T.SELECTED_TYPE.UPLOAD,T.SELECTED_TYPE.LINK,T.SELECTED_TYPE.ILLUSTRATION],onSelectImage:function(e){p.Z.setBlockProperty(ne,E.Q_.URL,e,{at:o}),ye(!0,e)},width:500,open:ee,setopen:he,linkValue:null===c||void 0===c?void 0:c.url,accept:"image/*",buttonClassname:"select-image-".concat(c.id)})})]})}},8677:function(e,t,n){"use strict";n.d(t,{lm:function(){return r}});var i=n(67294),r=(n(85893),(0,i.createContext)(!1))},7884:function(e){e.exports={container:"ImageElement_container__2oPwa",imgWrapper:"ImageElement_imgWrapper__WLOVs",addImage:"ImageElement_addImage__3yIvs",icon:"ImageElement_icon__3XUhf",imageOptions:"ImageElement_imageOptions__3pL0J",imageResizableContainer:"ImageElement_imageResizableContainer__2jvL_",customHandle:"ImageElement_customHandle__Jz5X9",resizableContainer:"ImageElement_resizableContainer__3q3y6",customHandleShow:"ImageElement_customHandleShow__2RLN-",linkIcon:"ImageElement_linkIcon__361Kj"}}}]);